"use strict";(self["webpackChunkk_style"]=self["webpackChunkk_style"]||[]).push([[405],{9509:function(t,s){s.A={save(t){const s=JSON.stringify(t);localStorage.setItem("myFavorite",s)},get(){return JSON.parse(localStorage.getItem("myFavorite"))}}},5405:function(t,s,e){e.r(s),e.d(s,{default:function(){return W}});var i=e(6768),a=e(4232);const l=t=>((0,i.Qi)("data-v-1884d77a"),t=t(),(0,i.jt)(),t),c={key:0,class:"container p-lg-5 m-0 m-auto",style:{"min-height":"660px"}},o=l((()=>(0,i.Lk)("h3",{class:"m-0 mb-4"},[(0,i.Lk)("i",{class:"bi bi-bag-heart me-2"}),(0,i.eW)("您的願望清單")],-1))),r={class:"table",style:{"max-width":"1200px"}},n=l((()=>(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",{class:"col-2 col-lg-2 ps-0"},"商品圖片"),(0,i.Lk)("th",{class:"col-4 col-lg-3"},"商品名稱"),(0,i.Lk)("th",{class:"col-2 col-lg-2 ps-lg-3"},"價格"),(0,i.Lk)("th",{class:"col-3 col-lg-3 text-center"},"加入購物車"),(0,i.Lk)("th",{class:"col-1 col-lg-2 text-center"},"刪除")])],-1))),d={class:"ps-md-0"},p=["src","alt"],u={class:"align-middle pb-0 pb-md-2"},h={class:"mb-2"},k={class:"m-0"},g={class:"align-middle ps-lg-3 pt-0 pt-md-2"},m={class:"card-text mt-2"},L=l((()=>(0,i.Lk)("span",{class:"price d-md-none"},"價格:",-1))),v={key:0,class:"text-dark"},f={key:1},b={key:0,class:"text-dark text-decoration-line-through"},y={key:1,class:"text-danger d-md-block"},x={class:"addCartBtn align-middle text-center"},C=["onClick"],_=l((()=>(0,i.Lk)("i",{class:"fa-solid fa-cart-shopping me-2"},null,-1))),I={class:"align-middle text-center"},A=["onClick"],F=l((()=>(0,i.Lk)("i",{class:"fa-solid fa-trash-can",style:{"font-size":"20px"}},null,-1))),E=[F],X={key:1,class:"text text-center p-5 m-5",style:{"min-height":"560px"}},$=l((()=>(0,i.Lk)("i",{class:"bi bi-bag-heart my-5 pb-3",style:{"font-size":"110px"}},null,-1))),T=l((()=>(0,i.Lk)("h2",{class:"pt-4 pb-3"},"您的願望清單目前是空的唷~",-1))),w=l((()=>(0,i.Lk)("p",{class:"p-3",style:{"font-size":"20px"}},"趕快加入商品到願望清單吧~",-1)));function N(t,s,e,l,F,N){const O=(0,i.g2)("isLoading"),S=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(O,{active:F.isLoading},null,8,["active"]),F.products.length>0?((0,i.uX)(),(0,i.CE)("div",c,[o,(0,i.Lk)("table",r,[n,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(F.products,(s=>((0,i.uX)(),(0,i.CE)("tr",{key:s.id},[(0,i.Lk)("td",d,[(0,i.Lk)("img",{src:s.imageUrl,alt:s.title},null,8,p)]),(0,i.Lk)("td",u,[(0,i.Lk)("h5",h,(0,a.v_)(s.title),1),(0,i.Lk)("p",k,"分類:"+(0,a.v_)(s.category),1)]),(0,i.Lk)("td",g,[(0,i.Lk)("p",m,[L,s.origin_price===s.price?((0,i.uX)(),(0,i.CE)("span",v," NT$"+(0,a.v_)(t.$filters.currency(s.origin_price)),1)):((0,i.uX)(),(0,i.CE)("span",f,[s.price?((0,i.uX)(),(0,i.CE)("span",b," NT$"+(0,a.v_)(t.$filters.currency(s.origin_price)),1)):(0,i.Q3)("",!0),s.price?((0,i.uX)(),(0,i.CE)("span",y," NT$"+(0,a.v_)(t.$filters.currency(s.price)),1)):(0,i.Q3)("",!0)]))])]),(0,i.Lk)("td",x,[(0,i.Lk)("button",{class:"btn btn-dark rounded-0",onClick:t=>N.addCard(s.id)},[_,(0,i.eW)("加入購物車 ")],8,C)]),(0,i.Lk)("td",I,[(0,i.Lk)("button",{class:"border-0 bg-white text-dark",onClick:t=>N.delFavorite(s)},E,8,A)])])))),128))])])])):((0,i.uX)(),(0,i.CE)("div",X,[$,T,w,(0,i.bF)(S,{to:"/userAllProducts",class:"btn btn-dark mb-1"},{default:(0,i.k6)((()=>[(0,i.eW)("去逛逛")])),_:1})]))],64)}var O=e(9509),S=e(1600),P={data(){return{products:{},favoriteItems:O.A.get("myFavorite")||[],loadingItem:"",isLoading:!1}},methods:{getAllProducts(){const t="https://vue3-course-api.hexschool.io/api/kstyle-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1;const s=t.data.products.filter((t=>this.favoriteItems.includes(t.id)));this.products=s.sort(((t,s)=>this.favoriteItems.indexOf(s.id)-this.favoriteItems.indexOf(t.id)))}))},delFavorite(t){this.favoriteItems.includes(t.id)&&(this.favoriteItems.splice(this.favoriteItems.indexOf(t.id),1),S.A.emit("push-message",{style:"warning",title:"已從收藏清單中移除"})),O.A.save(this.favoriteItems),this.getAllProducts(),S.A.emit("updateFavorite")},addCard(t){const s="https://vue3-course-api.hexschool.io/api/kstyle-api/cart",e={product_id:t,qty:1};this.isLoading=!0,this.$http.post(s,{data:e}).then((t=>{this.isLoading=!1,this.$httpMessageState(t,"加入購物車"),S.A.emit("updateCart")}))},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}},created(){this.getAllProducts(),this.scrollToTop()}},z=e(1241);const Q=(0,z.A)(P,[["render",N],["__scopeId","data-v-1884d77a"]]);var W=Q}}]);
//# sourceMappingURL=405.e9df998f.js.map