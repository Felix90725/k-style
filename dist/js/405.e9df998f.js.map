{"version":3,"file":"js/405.e9df998f.js","mappings":"2GAAA,KAEEA,IAAAA,CAAKC,GACH,MAAMC,EAAaC,KAAKC,UAAUH,GAClCI,aAAaC,QAAQ,aAAcJ,EACrC,EAEAK,GAAAA,GACE,OAAOJ,KAAKK,MAAMH,aAAaI,QAAQ,cACzC,E,2JCTFC,IAAA,EAEOC,MAAM,8BAA8BC,MAAA,wB,UACvCC,EAAAA,EAAAA,IAAoE,MAAhEF,MAAM,YAAU,EAACE,EAAAA,EAAAA,IAAoC,KAAjCF,MAAM,0BAHlCG,EAAAA,EAAAA,IAG6D,YAAM,K,GACxDH,MAAM,QAAQC,MAAA,wB,UACnBC,EAAAA,EAAAA,IAQQ,eAPNA,EAAAA,EAAAA,IAMK,YALHA,EAAAA,EAAAA,IAAyC,MAArCF,MAAM,uBAAsB,SAChCE,EAAAA,EAAAA,IAAoC,MAAhCF,MAAM,kBAAiB,SAC3BE,EAAAA,EAAAA,IAA0C,MAAtCF,MAAM,0BAAyB,OACnCE,EAAAA,EAAAA,IAAiD,MAA7CF,MAAM,8BAA6B,UACvCE,EAAAA,EAAAA,IAA8C,MAA1CF,MAAM,8BAA6B,UAAE,K,GAKrCA,MAAM,W,EAhBpB,c,GAiBcA,MAAM,6B,GACJA,MAAM,Q,GACPA,MAAM,O,GAEPA,MAAM,qC,GACLA,MAAM,kB,UACPE,EAAAA,EAAAA,IAAwC,QAAlCF,MAAM,mBAAkB,OAAG,K,GAvB/CD,IAAA,EAwBoBC,MAAM,a,GAxB1BD,IAAA,G,GAAAA,IAAA,EA4BsBC,MAAM,0C,GA5B5BD,IAAA,EA+BsBC,MAAM,0B,GAMdA,MAAM,uC,EArCpB,Y,UAuCcE,EAAAA,EAAAA,IAA8C,KAA3CF,MAAM,kCAAgC,W,GAGzCA,MAAM,4B,EA1CpB,Y,UA4CcE,EAAAA,EAAAA,IAA6D,KAA1DF,MAAM,wBAAwBC,MAAA,sB,cAAjCG,G,GA5CdL,IAAA,EAmDOC,MAAM,2BAA2BC,MAAA,wB,UAClCC,EAAAA,EAAAA,IAAkE,KAA/DF,MAAM,4BAA4BC,MAAA,uB,qBACrCC,EAAAA,EAAAA,IAAwC,MAApCF,MAAM,aAAY,iBAAa,K,UACnCE,EAAAA,EAAAA,IAAwD,KAArDF,MAAM,MAAMC,MAAA,sBAAwB,iBAAa,K,kGAtD1DI,EAAAA,EAAAA,IAAAC,EAAAA,GAAA,OACEC,EAAAA,EAAAA,IAA2CC,EAAA,CAA/BC,OAAQC,EAAAC,WAAS,mBAC4CD,EAAAE,SAASC,OAAS,IAAH,WAAxFR,EAAAA,EAAAA,IAgDM,MAhDNS,EAgDM,CA/CJC,GACAb,EAAAA,EAAAA,IA6CQ,QA7CRc,EA6CQ,CA5CNC,GASAf,EAAAA,EAAAA,IAkCQ,6BAjCNG,EAAAA,EAAAA,IAgCKC,EAAAA,GAAA,MA/CbY,EAAAA,EAAAA,IAe2BR,EAAAE,UAARO,K,WAAXd,EAAAA,EAAAA,IAgCK,MAhCyBN,IAAKoB,EAAKC,I,EACtClB,EAAAA,EAAAA,IAAuE,KAAvEmB,EAAuE,EAAnDnB,EAAAA,EAAAA,IAA8C,OAAxCoB,IAAKH,EAAKI,SAAWC,IAAKL,EAAKM,O,OAhBnEC,MAiBUxB,EAAAA,EAAAA,IAGK,KAHLyB,EAGK,EAFHzB,EAAAA,EAAAA,IAAsC,KAAtC0B,GAAsCC,EAAAA,EAAAA,IAAlBV,EAAKM,OAAK,IAC9BvB,EAAAA,EAAAA,IAAyC,IAAzC4B,EAAe,OAAGD,EAAAA,EAAAA,IAAGV,EAAKY,UAAQ,MAEpC7B,EAAAA,EAAAA,IAeK,KAfL8B,EAeK,EAdH9B,EAAAA,EAAAA,IAaI,IAbJ+B,EAaI,CAZFC,EAC8Bf,EAAKgB,eAAiBhB,EAAKiB,QAAK,WAA9D/B,EAAAA,EAAAA,IAEO,OAFPgC,EAAgE,QAC3DR,EAAAA,EAAAA,IAAGS,EAAAC,SAASC,SAASrB,EAAKgB,eAAY,iBAE3C9B,EAAAA,EAAAA,IAOO,OAlCrBoC,EAAA,CA4B2EtB,EAAKiB,QAAK,WAArE/B,EAAAA,EAAAA,IAEO,OAFPqC,EAAuE,QAClEb,EAAAA,EAAAA,IAAGS,EAAAC,SAASC,SAASrB,EAAKgB,eAAY,KA7B3DQ,EAAAA,EAAAA,IAAA,OA+B2DxB,EAAKiB,QAAK,WAArD/B,EAAAA,EAAAA,IAEO,OAFPuC,EAAuD,QAClDf,EAAAA,EAAAA,IAAGS,EAAAC,SAASC,SAASrB,EAAKiB,QAAK,KAhCpDO,EAAAA,EAAAA,IAAA,eAqCUzC,EAAAA,EAAAA,IAIK,KAJL2C,EAIK,EAHH3C,EAAAA,EAAAA,IAES,UAFDF,MAAM,yBAA0B8C,QAAKC,GAAEC,EAAAC,QAAQ9B,EAAKC,K,CAC1D8B,GAvCd/C,EAAAA,EAAAA,IAuC4D,WAChD,EAxCZgD,MA0CUjD,EAAAA,EAAAA,IAIK,KAJLkD,EAIK,EAHHlD,EAAAA,EAAAA,IAES,UAFDF,MAAM,8BAA+B8C,QAAKC,GAAEC,EAAAK,YAAYlC,IA3C5EmC,EAAA,EAAAC,U,0BAmDElD,EAAAA,EAAAA,IAKM,MALNmD,EAKM,CAJFC,EACAC,EACAC,GACApD,EAAAA,EAAAA,IAA8EqD,EAAA,CAAjEC,GAAG,mBAAmB7D,MAAM,qB,CAvD/C8D,SAAAC,EAAAA,EAAAA,KAuDmE,IAAG,EAvDtE5D,EAAAA,EAAAA,IAuDmE,UAvDnE6D,EAAA,Q,4BA+DA,GACEC,IAAAA,GACE,MAAO,CACLrD,SAAU,CAAC,EACXsD,cAAeC,EAAAA,EAAgBvE,IAAI,eAAiB,GACpDwE,YAAa,GACbzD,WAAW,EAEf,EACA0D,QAAS,CAEPC,cAAAA,GACE,MAAMC,EAAM,mEACZC,KAAK7D,WAAY,EACjB6D,KAAKC,MAAM7E,IAAI2E,GAAKG,MAAMC,IACxBH,KAAK7D,WAAY,EAEjB,MAAMiE,EAAiBD,EAAIV,KAAKrD,SAC7BiE,QAAQC,GAAYN,KAAKN,cAAca,SAASD,EAAQ1D,MAE3DoD,KAAK5D,SAAWgE,EAAeI,MAC7B,CAACC,EAAGC,IAAMV,KAAKN,cAAciB,QAAQD,EAAE9D,IAAMoD,KAAKN,cAAciB,QAAQF,EAAE7D,KAC3E,GAEL,EAEAiC,WAAAA,CAAYyB,GACNN,KAAKN,cAAca,SAASD,EAAQ1D,MAEtCoD,KAAKN,cAAckB,OAAOZ,KAAKN,cAAciB,QAAQL,EAAQ1D,IAAK,GAClEiE,EAAAA,EAAQC,KAAK,eAAgB,CAE3BrF,MAAO,UACPwB,MAAO,eAGX0C,EAAAA,EAAgB9E,KAAKmF,KAAKN,eAC1BM,KAAKF,iBACLe,EAAAA,EAAQC,KAAK,iBACf,EAEArC,OAAAA,CAAQ7B,GACN,MAAMmD,EAAM,2DACNgB,EAAO,CACXC,WAAYpE,EACZqE,IAAK,GAEPjB,KAAK7D,WAAY,EACjB6D,KAAKC,MAAMiB,KAAKnB,EAAK,CAAEN,KAAMsB,IAAQb,MAAMC,IACzCH,KAAK7D,WAAY,EACjB6D,KAAKmB,kBAAkBhB,EAAK,SAC5BU,EAAAA,EAAQC,KAAK,aAAa,GAG9B,EAEAM,WAAAA,GACEC,OAAOC,SAAS,CACdC,IAAK,EACLC,SAAU,UAEd,GAEFC,OAAAA,GACEzB,KAAKF,iBACLE,KAAKoB,aACP,G,UC1HF,MAAMM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://k-style/./src/methods/handleFavorites.js","webpack://k-style/./src/views/UserLike.vue","webpack://k-style/./src/views/UserLike.vue?f841"],"sourcesContent":["export default {\n  // 將資料存入localStorage\n  save(itemId) {\n    const favoriteId = JSON.stringify(itemId); // 把要存的itemId轉成JSON字串\n    localStorage.setItem('myFavorite', favoriteId);\n  },\n  // 從localStorage取出myFavorite資料\n  get() {\n    return JSON.parse(localStorage.getItem('myFavorite')); // 將JSON字串轉換成JavaScript的數值或是物件\n  },\n};\n","<template>\n  <isLoading :active=\"isLoading\"></isLoading>\n  <div class=\"container p-lg-5 m-0 m-auto\" style=\"min-height: 660px\" v-if=\"products.length > 0\">\n    <h3 class=\"m-0 mb-4\"><i class=\"bi bi-bag-heart me-2\"></i>您的願望清單</h3>\n    <table class=\"table\" style=\"max-width: 1200px\">\n      <thead>\n        <tr>\n          <th class=\"col-2 col-lg-2 ps-0\">商品圖片</th>\n          <th class=\"col-4 col-lg-3\">商品名稱</th>\n          <th class=\"col-2 col-lg-2 ps-lg-3\">價格</th>\n          <th class=\"col-3 col-lg-3 text-center\">加入購物車</th>\n          <th class=\"col-1 col-lg-2 text-center\">刪除</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in products\" :key=\"item.id\">\n          <td class=\"ps-md-0\"><img :src=\"item.imageUrl\" :alt=\"item.title\" /></td>\n          <td class=\"align-middle pb-0 pb-md-2\">\n            <h5 class=\"mb-2\">{{ item.title }}</h5>\n            <p class=\"m-0\">分類:{{ item.category }}</p>\n          </td>\n          <td class=\"align-middle ps-lg-3 pt-0 pt-md-2\">\n            <p class=\"card-text mt-2\">\n              <span class=\"price d-md-none\">價格:</span>\n              <span class=\"text-dark\" v-if=\"item.origin_price === item.price\">\n                NT${{ $filters.currency(item.origin_price) }}\n              </span>\n              <span v-else>\n                <span class=\"text-dark text-decoration-line-through\" v-if=\"item.price\">\n                  NT${{ $filters.currency(item.origin_price) }}\n                </span>\n                <span class=\"text-danger d-md-block\" v-if=\"item.price\">\n                  NT${{ $filters.currency(item.price) }}\n                </span>\n              </span>\n            </p>\n          </td>\n          <td class=\"addCartBtn align-middle text-center\">\n            <button class=\"btn btn-dark rounded-0\" @click=\"addCard(item.id)\">\n              <i class=\"fa-solid fa-cart-shopping me-2\"></i>加入購物車\n            </button>\n          </td>\n          <td class=\"align-middle text-center\">\n            <button class=\"border-0 bg-white text-dark\" @click=\"delFavorite(item)\">\n              <i class=\"fa-solid fa-trash-can\" style=\"font-size: 20px\"></i>\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class=\"text text-center p-5 m-5\" style=\"min-height: 560px;\" v-else>\n      <i class=\"bi bi-bag-heart my-5 pb-3\" style=\"font-size: 110px\"></i>\n      <h2 class=\"pt-4 pb-3\">您的願望清單目前是空的唷~</h2>\n      <p class=\"p-3\" style=\"font-size: 20px\">趕快加入商品到願望清單吧~</p>\n      <router-link to=\"/userAllProducts\" class=\"btn btn-dark mb-1\">去逛逛</router-link>\n  </div>\n</template>\n\n<script>\nimport handleFavorites from '@/methods/handleFavorites';\nimport emitter from '@/methods/emitter';\n\nexport default {\n  data() {\n    return {\n      products: {},\n      favoriteItems: handleFavorites.get('myFavorite') || [], // 取得收藏商品\n      loadingItem: '',\n      isLoading: false,\n    };\n  },\n  methods: {\n    // 取得商品列表並篩選收藏品項\n    getAllProducts() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.isLoading = true;\n      this.$http.get(api).then((res) => {\n        this.isLoading = false;\n        // 過濾收藏的產品\n        const filterFavorite = res.data.products\n          .filter((product) => this.favoriteItems.includes(product.id));\n        // 根據 filterFavorite 的順序排序收藏產品\n        this.products = filterFavorite.sort(\n          (a, b) => this.favoriteItems.indexOf(b.id) - this.favoriteItems.indexOf(a.id),\n        );\n      });\n    },\n    // 移除愛心\n    delFavorite(product) {\n      if (this.favoriteItems.includes(product.id)) {\n        // 移除收藏\n        this.favoriteItems.splice(this.favoriteItems.indexOf(product.id), 1);\n        emitter.emit('push-message', {\n          // toast\n          style: 'warning',\n          title: '已從收藏清單中移除',\n        });\n      }\n      handleFavorites.save(this.favoriteItems);\n      this.getAllProducts();\n      emitter.emit('updateFavorite'); // 與 navFavorite 同步更新\n    },\n    // 加入購物車\n    addCard(id) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const cart = {\n        product_id: id,\n        qty: 1,\n      };\n      this.isLoading = true;\n      this.$http.post(api, { data: cart }).then((res) => {\n        this.isLoading = false;\n        this.$httpMessageState(res, '加入購物車');\n        emitter.emit('updateCart'); // 與 UserNavbar 同步更新\n        // console.log('addCard', res);\n      });\n    },\n    // 滾動到最上方\n    scrollToTop() {\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth',\n      });\n    },\n  },\n  created() {\n    this.getAllProducts();\n    this.scrollToTop();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\nimg {\n  width: 180px;\n  height: 220px;\n  object-fit: cover;\n}\n\n@media screen and (max-width: 991px) {\n.addCartBtn{\n  padding: 0;\n  button{\n    width: 100%;\n    font-size: 14px;\n  }\n}\n}\n@media screen and (max-width: 767px) {\n  h5{\n    font-size: 24px;\n  }\n  p{\n    font-size: 18px;\n  }\n  img {\n    width: 300px;\n    height: 400px;\n  }\n  .table {\n    span{\n      font-size: 22px;\n      & + span{\n        margin-left: 5px;\n      }\n    }\n    border-collapse: collapse;\n    td,\n    thead {\n      border: none;\n    }\n    thead {\n      display: none;\n    }\n    tbody {\n      tr {\n        display: flex;\n        flex-direction: column;\n        border-bottom: 1px solid #888888;\n        margin-bottom: 10px;\n        td {\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n        }\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./UserLike.vue?vue&type=template&id=1884d77a&scoped=true\"\nimport script from \"./UserLike.vue?vue&type=script&lang=js\"\nexport * from \"./UserLike.vue?vue&type=script&lang=js\"\n\nimport \"./UserLike.vue?vue&type=style&index=0&id=1884d77a&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1884d77a\"]])\n\nexport default __exports__"],"names":["save","itemId","favoriteId","JSON","stringify","localStorage","setItem","get","parse","getItem","key","class","style","_createElementVNode","_createTextVNode","_hoisted_22","_createElementBlock","_Fragment","_createVNode","_component_isLoading","active","$data","isLoading","products","length","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_renderList","item","id","_hoisted_5","src","imageUrl","alt","title","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","_hoisted_9","category","_hoisted_10","_hoisted_11","_hoisted_12","origin_price","price","_hoisted_13","_ctx","$filters","currency","_hoisted_14","_hoisted_15","_createCommentVNode","_hoisted_16","_hoisted_17","onClick","$event","$options","addCard","_hoisted_19","_hoisted_18","_hoisted_20","delFavorite","_hoisted_23","_hoisted_21","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_component_router_link","to","default","_withCtx","_","data","favoriteItems","handleFavorites","loadingItem","methods","getAllProducts","api","this","$http","then","res","filterFavorite","filter","product","includes","sort","a","b","indexOf","splice","emitter","emit","cart","product_id","qty","post","$httpMessageState","scrollToTop","window","scrollTo","top","behavior","created","__exports__","render"],"sourceRoot":""}