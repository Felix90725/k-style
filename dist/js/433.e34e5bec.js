"use strict";(self["webpackChunkk_style"]=self["webpackChunkk_style"]||[]).push([[433],{8814:function(a,e,s){s.r(e),s.d(e,{default:function(){return B}});var t=s(6768),l=s(4232),r=s(5130);const o=a=>((0,t.Qi)("data-v-38b68120"),a=a(),(0,t.jt)(),a),i={class:"container my-5"},d=(0,t.Fv)('<ol class="shoppingProcess d-flex justify-content-center align-items-center p-0 mb-5" data-v-38b68120><li data-v-38b68120><span class="active" data-v-38b68120>1</span><h5 class="my-2" data-v-38b68120>購物車</h5><p class="text-warning" data-v-38b68120>請確認您的商品</p></li><i class="bi bi-arrow-right" data-v-38b68120></i><li data-v-38b68120><span class="active" data-v-38b68120>2</span><h5 class="my-2" data-v-38b68120>填寫資料</h5><p class="text-warning" data-v-38b68120>填寫訂購人相關資料</p></li><i class="bi bi-arrow-right" data-v-38b68120></i><li data-v-38b68120><span data-v-38b68120>3</span><h5 class="my-2" data-v-38b68120>訂單付款</h5><p class="text-warning" data-v-38b68120>確認資料並付款</p></li><i class="bi bi-arrow-right" data-v-38b68120></i><li data-v-38b68120><span data-v-38b68120>4</span><h5 class="my-2" data-v-38b68120>完成訂單</h5><p class="text-warning" data-v-38b68120>完成訂單</p></li></ol>',1),n={class:"row"},c={class:"col-12 col-lg-8"},m=o((()=>(0,t.Lk)("h3",null,[(0,t.Lk)("i",{class:"fa-solid fa-user me-2"}),(0,t.eW)("顧客資料")],-1))),b={class:"customerData"},u={class:"my-3"},p=o((()=>(0,t.Lk)("label",{for:"name",class:"form-label mb-2"},[(0,t.eW)("姓名 "),(0,t.Lk)("span",{class:"text-danger"},"*")],-1))),f={class:"mb-3"},v=o((()=>(0,t.Lk)("label",{for:"phone",class:"form-label mb-2"},[(0,t.eW)("電話 "),(0,t.Lk)("span",{class:"text-danger"},"*")],-1))),k={class:"mb-3"},h=o((()=>(0,t.Lk)("label",{for:"email",class:"form-label mb-2"},[(0,t.eW)("Email "),(0,t.Lk)("span",{class:"text-danger"},"*")],-1))),L={class:"mb-3"},g=o((()=>(0,t.Lk)("label",{for:"address",class:"form-label mb-2"},[(0,t.eW)(" 收件地址 "),(0,t.Lk)("span",{class:"text-danger"},"*")],-1))),y={class:"mb-3"},x=o((()=>(0,t.Lk)("label",{for:"message",class:"form-label mb-2"},"訂單備註",-1))),w={class:"col-12 col-lg-4"},C={class:"cart-total"},F=o((()=>(0,t.Lk)("h4",{class:"m-0 p-2 text-center bg-secondary text-light rounded-top-2"},"訂單資訊",-1))),_={class:"card-body p-3 border"},V={class:"table m-0"},$=o((()=>(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",{scope:"col",class:"ps-0"},"商品名稱"),(0,t.Lk)("th",{scope:"col",class:"text-end pe-0",style:{width:"4rem"}},"數量")])],-1))),E={class:"ps-0"},W={class:"text-end pe-0"},j={class:"border-bottom pt-3 pb-3"},U={class:"Subtotal d-flex justify-content-between align-items-center"},q=o((()=>(0,t.Lk)("h5",{class:"mb-0 fw-normal"},"小計",-1))),P={class:"mb-0"},X={key:0,class:"d-flex align-items-center justify-content-between text-danger mt-2"},D=o((()=>(0,t.Lk)("h5",{class:"m-0 fw-normal"},"折價劵折扣",-1))),I={class:"m-0 fw-normal"},N={class:"total d-flex align-items-center justify-content-between mt-3"},O=o((()=>(0,t.Lk)("h5",{class:"m-0 fw-normal"},"合計",-1))),T={class:"m-0 fw-normal"},K={class:"createOrder d-flex"},Q=o((()=>(0,t.Lk)("button",{type:"submit",form:"customerData",class:"btn btn-dark w-100",style:{"border-radius":"0","border-bottom-right-radius":"0.25rem"}}," 建立訂單 ",-1)));function S(a,e,s,o,S,A){const J=(0,t.g2)("isLoading"),z=(0,t.g2)("v-field"),B=(0,t.g2)("error-message"),G=(0,t.g2)("v-form"),H=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(J,{active:S.isLoading},null,8,["active"]),(0,t.Lk)("div",i,[d,(0,t.Lk)("div",n,[(0,t.Lk)("div",c,[m,(0,t.Lk)("div",b,[(0,t.bF)(G,{id:"customerData",onSubmit:e[5]||(e[5]=a=>A.createOrder())},{default:(0,t.k6)((({errors:a})=>[(0,t.Lk)("div",u,[p,(0,t.bF)(z,{id:"name",name:"顧客姓名",type:"text",class:(0,l.C4)(["form-control",{"is-invalid":a["顧客姓名"]}]),placeholder:"請輸入您的姓名",rules:"required",modelValue:S.form.user.name,"onUpdate:modelValue":e[0]||(e[0]=a=>S.form.user.name=a)},null,8,["class","modelValue"]),(0,t.bF)(B,{name:"顧客姓名",class:"invalid-feedback"})]),(0,t.Lk)("div",f,[v,(0,t.bF)(z,{id:"phone",name:"phone",type:"text",class:(0,l.C4)(["form-control",{"is-invalid":a["phone"]}]),placeholder:"請輸入您的手機電話號碼",rules:A.isPhone,modelValue:S.form.user.tel,"onUpdate:modelValue":e[1]||(e[1]=a=>S.form.user.tel=a)},null,8,["class","rules","modelValue"]),(0,t.bF)(B,{name:"phone",class:"invalid-feedback"})]),(0,t.Lk)("div",k,[h,(0,t.bF)(z,{id:"email",name:"email",type:"email",class:(0,l.C4)(["form-control",{"is-invalid":a["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:S.form.user.email,"onUpdate:modelValue":e[2]||(e[2]=a=>S.form.user.email=a)},null,8,["class","modelValue"]),(0,t.bF)(B,{name:"email",class:"invalid-feedback"})]),(0,t.Lk)("div",L,[g,(0,t.bF)(z,{id:"address",name:"收件地址",type:"address",class:(0,l.C4)(["form-control",{"is-invalid":a["收件地址"]}]),placeholder:"請輸入收件地址",rules:"required",modelValue:S.form.user.address,"onUpdate:modelValue":e[3]||(e[3]=a=>S.form.user.address=a)},null,8,["class","modelValue"]),(0,t.bF)(B,{name:"收件地址",class:"invalid-feedback"})]),(0,t.Lk)("div",y,[x,(0,t.bo)((0,t.Lk)("textarea",{type:"text",class:"form-control",id:"message","onUpdate:modelValue":e[4]||(e[4]=a=>S.form.message=a),style:{"min-height":"150px"}},null,512),[[r.Jo,S.form.message]])])])),_:1})])]),(0,t.Lk)("div",w,[(0,t.Lk)("div",C,[F,(0,t.Lk)("div",_,[(0,t.Lk)("table",V,[$,(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(S.cart.carts,(a=>((0,t.uX)(),(0,t.CE)("tr",{key:a.id},[(0,t.Lk)("td",E,(0,l.v_)(a.product.title),1),(0,t.Lk)("td",W,(0,l.v_)(a.qty),1)])))),128))])]),(0,t.Lk)("div",j,[(0,t.Lk)("div",U,[q,(0,t.Lk)("p",P,"NT$ "+(0,l.v_)(a.$filters.currency(S.cart.total)),1)]),S.cart.total!=S.cart.final_total?((0,t.uX)(),(0,t.CE)("div",X,[D,(0,t.Lk)("span",I," -NT$ "+(0,l.v_)(a.$filters.currency(S.cart.total-S.cart.final_total)),1)])):(0,t.Q3)("",!0)]),(0,t.Lk)("div",N,[O,(0,t.Lk)("span",T,"NT$ "+(0,l.v_)(a.$filters.currency(S.cart.final_total)),1)])]),(0,t.Lk)("div",K,[(0,t.bF)(H,{to:"/userCart",class:"btn btn-outline-secondary w-100",style:{"border-radius":"0","border-bottom-left-radius":"0.25rem"}},{default:(0,t.k6)((()=>[(0,t.eW)("回上一步")])),_:1}),Q])])])])])],64)}s(4114);var A={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},cart:{},isLoading:!1}},methods:{isPhone(a){const e=/^(09)[0-9]{8}$/;return!!e.test(a)||"請輸入正確的手機號碼"},createOrder(){const a="https://vue3-course-api.hexschool.io/api/kstyle-api/order";this.isLoading=!0,this.$http.post(a,{data:this.form}).then((a=>{this.isLoading=!1,this.$router.push(`/userPay/${a.data.orderId}`)}))},getCart(){const a="https://vue3-course-api.hexschool.io/api/kstyle-api/cart";this.isLoading=!0,this.$http.get(a).then((a=>{this.isLoading=!1,this.cart=a.data.data,console.log("getCart",a)}))}},created(){this.getCart()}},J=s(1241);const z=(0,J.A)(A,[["render",S],["__scopeId","data-v-38b68120"]]);var B=z}}]);
//# sourceMappingURL=433.e34e5bec.js.map