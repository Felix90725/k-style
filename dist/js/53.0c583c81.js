"use strict";(self["webpackChunkk_style"]=self["webpackChunkk_style"]||[]).push([[53],{9509:function(e,t){t.A={save(e){const t=JSON.stringify(e);localStorage.setItem("myFavorite",t)},get(){return JSON.parse(localStorage.getItem("myFavorite"))}}},9408:function(e,t,s){s.d(t,{A:function(){return m}});var a=s(6768),o=s(4232),i=s(5130);const r=e=>((0,a.Qi)("data-v-687b8042"),e=e(),(0,a.jt)(),e),c={"aria-label":"Page navigation example"},l={class:"pagination justify-content-center"},n=r((()=>(0,a.Lk)("span",{"aria-hidden":"true"},"«",-1))),d=[n],p=["onClick"],u=r((()=>(0,a.Lk)("span",{"aria-hidden":"true"},"»",-1))),g=[u];function h(e,t,s,r,n,u){return(0,a.uX)(),(0,a.CE)("nav",c,[(0,a.Lk)("ul",l,[(0,a.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===s.pages.current_page}])},[(0,a.Lk)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,i.D$)(((...e)=>u.previousPage&&u.previousPage(...e)),["prevent"]))},d)],2),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.pages.total_pages,(e=>((0,a.uX)(),(0,a.CE)("li",{class:(0,o.C4)(["page-item",{active:e===s.pages.current_page}]),key:e},[(0,a.Lk)("a",{class:"page-link",href:"#",onClick:(0,i.D$)((t=>u.updatePage(e)),["prevent"])},(0,o.v_)(e),9,p)],2)))),128)),(0,a.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:s.pages.current_page===s.pages.total_pages}])},[(0,a.Lk)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,i.D$)(((...e)=>u.nextPage&&u.nextPage(...e)),["prevent"]))},g)],2)])])}var k={props:["pages"],methods:{updatePage(e){this.$emit("emit-pages",e)},previousPage(){this.pages.current_page>1&&this.updatePage(this.pages.current_page-1)},nextPage(){this.pages.current_page<this.pages.total_pages&&this.updatePage(this.pages.current_page+1)}}},v=s(1241);const b=(0,v.A)(k,[["render",h],["__scopeId","data-v-687b8042"]]);var m=b},8053:function(e,t,s){s.r(t),s.d(t,{default:function(){return W}});var a=s(6768),o=s(4232),i=s(5130);const r=e=>((0,a.Qi)("data-v-45d31cc2"),e=e(),(0,a.jt)(),e),c=r((()=>(0,a.Lk)("div",{class:"product-banner container-fluid w-100 d-flex justify-content-center align-items-center"},[(0,a.Lk)("div",{class:"product-banner-filter w-100"}),(0,a.Lk)("div",{class:"product-banner-txt"},[(0,a.Lk)("h3",{class:"text-light mb-0"},"立即搶購最新韓系潮流單品，輕鬆擁有時尚風格！")])],-1))),l={class:"container mt-md-5"},n={class:"row"},d={class:"col-lg-3"},p={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},u={class:"card border-0"},g=r((()=>(0,a.Lk)("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true"},[(0,a.Lk)("div",{class:"d-flex justify-content-between align-items-center pe-1"},[(0,a.Lk)("h4",{class:"mb-0"},"商品分類"),(0,a.Lk)("i",{class:"fas fa-chevron-down"})])],-1))),h={id:"collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},k={class:"list card-body py-0"},v={class:"list-unstyled"},b={class:"col-lg-9 m-auto"},m={class:"ms-2 mb-4"},f={class:"container-fluid w-100"},L={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 gx-5"},C={class:"right-card"},y=["onClick"],P={class:"card border-0 position-relative rounded-0"},w=["onClick"],_={key:0,class:"fa-solid fa-heart text-danger",style:{"font-size":"1.8rem"}},x={key:1,class:"fa-regular fa-heart text-danger",style:{"font-size":"1.8rem"}},$=["src"],I={class:"card-body p-3 rounded-0"},E={class:"mt-1 mb-0"},T={class:"card-text mt-2"},X={key:0,class:"text-dark"},A={key:1},F={key:0,class:"text-dark text-decoration-line-through"},D={key:1,class:"text-danger ms-2"},O=["disabled","onClick"],N={key:0,class:"spinner-border spinner-border-sm",role:"status"},S=r((()=>(0,a.Lk)("span",{class:"visually-hidden"},"Loading...",-1))),j=[S];function Q(e,t,s,r,S,Q){const K=(0,a.g2)("isLoading"),z=(0,a.g2)("Pagination");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(K,{active:S.isLoading},null,8,["active"]),c,(0,a.Lk)("div",l,[(0,a.Lk)("div",n,[(0,a.Lk)("div",d,[(0,a.Lk)("div",p,[(0,a.Lk)("div",u,[g,(0,a.Lk)("div",h,[(0,a.Lk)("div",k,[(0,a.Lk)("ul",v,[(0,a.Lk)("li",null,[(0,a.Lk)("a",{href:"#",class:(0,o.C4)(["py-2 d-block",{active:"全部商品"===S.nowChoose}]),onClick:t[0]||(t[0]=(0,i.D$)((e=>Q.chooseProduct("全部商品")),["prevent"]))},"全部商品 (All)",2)]),(0,a.Lk)("li",null,[(0,a.Lk)("a",{href:"#",class:(0,o.C4)(["py-2 d-block",{active:"衣服"===S.nowChoose}]),onClick:t[1]||(t[1]=(0,i.D$)((e=>Q.chooseProduct("衣服")),["prevent"]))},"衣服 (Clothing)",2)]),(0,a.Lk)("li",null,[(0,a.Lk)("a",{href:"#",class:(0,o.C4)(["py-2 d-block",{active:"襯衫"===S.nowChoose}]),onClick:t[2]||(t[2]=(0,i.D$)((e=>Q.chooseProduct("襯衫")),["prevent"]))},"襯衫 (Shirt)",2)]),(0,a.Lk)("li",null,[(0,a.Lk)("a",{href:"#",class:(0,o.C4)(["py-2 d-block",{active:"褲子"===S.nowChoose}]),onClick:t[3]||(t[3]=(0,i.D$)((e=>Q.chooseProduct("褲子")),["prevent"]))},"褲子 (Pants)",2)]),(0,a.Lk)("li",null,[(0,a.Lk)("a",{href:"#",class:(0,o.C4)(["py-2 d-block",{active:"其它"===S.nowChoose}]),onClick:t[4]||(t[4]=(0,i.D$)((e=>Q.chooseProduct("其它")),["prevent"]))},"其它 (Other)",2)])])])])])])]),(0,a.Lk)("div",b,[(0,a.Lk)("h3",m,(0,o.v_)(S.nowChoose),1),(0,a.Lk)("div",f,[(0,a.Lk)("div",L,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(S.filteredProducts,(t=>((0,a.uX)(),(0,a.CE)("div",{class:"col mb-4",key:t.id},[(0,a.Lk)("div",C,[(0,a.Lk)("a",{href:"#",class:"product-card-link text-decoration-none position-relative",onClick:(0,i.D$)((e=>Q.getProduct(t.id)),["prevent"])},[(0,a.Lk)("div",P,[(0,a.Lk)("button",{type:"button",class:"favorite btn position-absolute border-0",onClick:(0,i.D$)((e=>Q.toggleFavorite(t)),["stop","prevent"])},[S.favoriteItems.includes(t.id)?((0,a.uX)(),(0,a.CE)("i",_)):((0,a.uX)(),(0,a.CE)("i",x))],8,w),(0,a.Lk)("img",{src:t.imageUrl,class:"card-img-top rounded-0",alt:"product"},null,8,$),(0,a.Lk)("div",I,[(0,a.Lk)("h5",E,(0,o.v_)(t.title),1),(0,a.Lk)("p",T,[t.origin_price===t.price?((0,a.uX)(),(0,a.CE)("span",X," NT$"+(0,o.v_)(e.$filters.currency(t.origin_price)),1)):((0,a.uX)(),(0,a.CE)("span",A,[t.price?((0,a.uX)(),(0,a.CE)("span",F," NT$"+(0,o.v_)(e.$filters.currency(t.origin_price)),1)):(0,a.Q3)("",!0),t.price?((0,a.uX)(),(0,a.CE)("span",D," NT$"+(0,o.v_)(e.$filters.currency(t.price)),1)):(0,a.Q3)("",!0)]))])])])],8,y),(0,a.Lk)("button",{type:"button",class:"product-card-btn btn btn-dark rounded-0",disabled:this.status.loadingItem===t.id,onClick:e=>Q.addCard(t.id)},[this.status.loadingItem===t.id?((0,a.uX)(),(0,a.CE)("div",N,j)):(0,a.Q3)("",!0),(0,a.eW)(" 加入購物車 ")],8,O)])])))),128))])]),(0,a.bF)(z,{pages:S.pagination,onEmitPages:Q.getProducts,class:"p-3 pt-0"},null,8,["pages","onEmitPages"])])])])],64)}s(4114);var K=s(9408),z=s(1600),J=s(9509),M={components:{Pagination:K.A},data(){return{products:[],pagination:{},isLoading:!1,nowChoose:"全部商品",filteredProducts:[],status:{loadingItem:""},favoriteItems:J.A.get("myFavorite")||[]}},methods:{getProducts(e=1){const t="https://vue3-course-api.hexschool.io/api/kstyle-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1,console.log("getProduct",t),this.products=t.data.products,this.filterProducts(e),this.scrollToTop()}))},toggleFavorite(e){this.favoriteItems.includes(e.id)?(this.favoriteItems.splice(this.favoriteItems.indexOf(e.id),1),z.A.emit("push-message",{style:"warning",title:"已從收藏清單中移除"})):(this.favoriteItems.push(e.id),z.A.emit("push-message",{style:"success",title:"已新增至收藏清單"})),J.A.save(this.favoriteItems),z.A.emit("updateFavorite")},getProduct(e){this.$router.push(`/product/${e}`)},chooseProduct(e){this.nowChoose=e,this.filterProducts(),this.scrollToProduct()},filterProducts(e=1){"全部商品"===this.nowChoose?this.filteredProducts=this.products:this.filteredProducts=this.products.filter((e=>e.category===this.nowChoose)),this.setPagination(e)},setPagination(e=1){const t=9;this.pagination={total_pages:Math.ceil(this.filteredProducts.length/t),current_page:e,category:null},this.filteredProducts=this.filteredProducts.slice((e-1)*t,e*t)},addCard(e){const t="https://vue3-course-api.hexschool.io/api/kstyle-api/cart",s={product_id:e,qty:1};this.status.loadingItem=e,this.$http.post(t,{data:s}).then((e=>{this.status.loadingItem="",this.$httpMessageState(e,"加入購物車"),z.A.emit("updateCart")}))},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})},scrollToProduct(){window.scrollTo({top:400,behavior:"smooth"})}},created(){this.scrollToTop(),this.getProducts()}},q=s(1241);const U=(0,q.A)(M,[["render",Q],["__scopeId","data-v-45d31cc2"]]);var W=U}}]);
//# sourceMappingURL=53.0c583c81.js.map