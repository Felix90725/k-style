"use strict";(self["webpackChunkk_style"]=self["webpackChunkk_style"]||[]).push([[667],{5667:function(e,a,s){s.r(a),s.d(a,{default:function(){return J}});var t=s(6768),l=s(4232),r=s(5130);const d=e=>((0,t.Qi)("data-v-21e63d20"),e=e(),(0,t.jt)(),e),o={class:"container my-5"},i=(0,t.Fv)('<ol class="shoppingProcess d-flex justify-content-center align-items-center p-0 mb-5" data-v-21e63d20><li data-v-21e63d20><span class="active" data-v-21e63d20>1</span><h5 class="my-2" data-v-21e63d20>購物車</h5><p class="text-warning" data-v-21e63d20>請確認您的商品</p></li><i class="bi bi-arrow-right" data-v-21e63d20></i><li data-v-21e63d20><span class="active" data-v-21e63d20>2</span><h5 class="my-2" data-v-21e63d20>填寫資料</h5><p class="text-warning" data-v-21e63d20>填寫訂購人相關資料</p></li><i class="bi bi-arrow-right" data-v-21e63d20></i><li data-v-21e63d20><span data-v-21e63d20>3</span><h5 class="my-2" data-v-21e63d20>訂單付款</h5><p class="text-warning" data-v-21e63d20>確認資料並付款</p></li><i class="bi bi-arrow-right" data-v-21e63d20></i><li data-v-21e63d20><span data-v-21e63d20>4</span><h5 class="my-2" data-v-21e63d20>完成訂單</h5><p class="text-warning" data-v-21e63d20>完成訂單</p></li></ol>',1),n={class:"row"},c={class:"col-12 col-lg-8"},m=d((()=>(0,t.Lk)("h3",null,[(0,t.Lk)("i",{class:"fa-solid fa-user me-2"}),(0,t.eW)("顧客資料")],-1))),u={class:"customerData"},p={class:"my-3"},b=d((()=>(0,t.Lk)("label",{for:"name",class:"form-label mb-2"},[(0,t.eW)("姓名 "),(0,t.Lk)("span",{class:"text-danger"},"*")],-1))),f={class:"mb-3"},v=d((()=>(0,t.Lk)("label",{for:"phone",class:"form-label mb-2"},[(0,t.eW)("電話 "),(0,t.Lk)("span",{class:"text-danger"},"*")],-1))),h={class:"mb-3"},k=d((()=>(0,t.Lk)("label",{for:"email",class:"form-label mb-2"},[(0,t.eW)("Email "),(0,t.Lk)("span",{class:"text-danger"},"*")],-1))),L={class:"mb-3"},g=d((()=>(0,t.Lk)("label",{for:"address",class:"form-label mb-2"},[(0,t.eW)(" 收件地址 "),(0,t.Lk)("span",{class:"text-danger"},"*")],-1))),y={class:"mb-3"},x=d((()=>(0,t.Lk)("label",{for:"message",class:"form-label mb-2"},"訂單備註",-1))),w={class:"col-12 col-lg-4"},C={class:"cart-total"},F=d((()=>(0,t.Lk)("h4",{class:"m-0 p-2 text-center bg-secondary text-light rounded-top-2"},"訂單資訊",-1))),V={class:"card-body p-3 border"},_={class:"table m-0"},$=d((()=>(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",{scope:"col"},"商品名稱"),(0,t.Lk)("th",{scope:"col",class:"text-end",style:{width:"4rem"}},"數量")])],-1))),E={class:"text-end"},j={class:"border-bottom pt-3 pb-3"},U={class:"Subtotal d-flex justify-content-between align-items-center"},W=d((()=>(0,t.Lk)("h5",{class:"mb-0 fw-normal"},"小計",-1))),q={class:"mb-0"},P={key:0,class:"d-flex align-items-center justify-content-between text-danger mt-2"},X=d((()=>(0,t.Lk)("h5",{class:"m-0 fw-normal"},"折價劵折扣",-1))),D={class:"m-0 fw-normal"},I={class:"total d-flex align-items-center justify-content-between mt-3"},N=d((()=>(0,t.Lk)("h5",{class:"m-0 fw-normal"},"合計",-1))),O={class:"m-0 fw-normal"},T=d((()=>(0,t.Lk)("div",{class:"createOrder d-flex"},[(0,t.Lk)("a",{href:"/#/userCart",class:"btn btn-outline-secondary w-100",style:{"border-radius":"0","border-bottom-left-radius":"0.25rem"}},"回上一步"),(0,t.Lk)("button",{type:"submit",form:"customerData",class:"btn btn-dark w-100",style:{"border-radius":"0","border-bottom-right-radius":"0.25rem"}}," 建立訂單 ")],-1)));function K(e,a,s,d,K,Q){const S=(0,t.g2)("isLoading"),A=(0,t.g2)("v-field"),J=(0,t.g2)("error-message"),z=(0,t.g2)("v-form");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(S,{active:K.isLoading},null,8,["active"]),(0,t.Lk)("div",o,[i,(0,t.Lk)("div",n,[(0,t.Lk)("div",c,[m,(0,t.Lk)("div",u,[(0,t.bF)(z,{id:"customerData",onSubmit:a[5]||(a[5]=e=>Q.createOrder())},{default:(0,t.k6)((({errors:e})=>[(0,t.Lk)("div",p,[b,(0,t.bF)(A,{id:"name",name:"顧客姓名",type:"text",class:(0,l.C4)(["form-control",{"is-invalid":e["顧客姓名"]}]),placeholder:"請輸入您的姓名",rules:"required",modelValue:K.form.user.name,"onUpdate:modelValue":a[0]||(a[0]=e=>K.form.user.name=e)},null,8,["class","modelValue"]),(0,t.bF)(J,{name:"顧客姓名",class:"invalid-feedback"})]),(0,t.Lk)("div",f,[v,(0,t.bF)(A,{id:"phone",name:"phone",type:"text",class:(0,l.C4)(["form-control",{"is-invalid":e["phone"]}]),placeholder:"請輸入您的手機電話號碼",rules:Q.isPhone,modelValue:K.form.user.tel,"onUpdate:modelValue":a[1]||(a[1]=e=>K.form.user.tel=e)},null,8,["class","rules","modelValue"]),(0,t.bF)(J,{name:"phone",class:"invalid-feedback"})]),(0,t.Lk)("div",h,[k,(0,t.bF)(A,{id:"email",name:"email",type:"email",class:(0,l.C4)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:K.form.user.email,"onUpdate:modelValue":a[2]||(a[2]=e=>K.form.user.email=e)},null,8,["class","modelValue"]),(0,t.bF)(J,{name:"email",class:"invalid-feedback"})]),(0,t.Lk)("div",L,[g,(0,t.bF)(A,{id:"address",name:"收件地址",type:"address",class:(0,l.C4)(["form-control",{"is-invalid":e["收件地址"]}]),placeholder:"請輸入收件地址",rules:"required",modelValue:K.form.user.address,"onUpdate:modelValue":a[3]||(a[3]=e=>K.form.user.address=e)},null,8,["class","modelValue"]),(0,t.bF)(J,{name:"收件地址",class:"invalid-feedback"})]),(0,t.Lk)("div",y,[x,(0,t.bo)((0,t.Lk)("textarea",{type:"text",class:"form-control",id:"message","onUpdate:modelValue":a[4]||(a[4]=e=>K.form.message=e),style:{"min-height":"150px"}},null,512),[[r.Jo,K.form.message]])])])),_:1})])]),(0,t.Lk)("div",w,[(0,t.Lk)("div",C,[F,(0,t.Lk)("div",V,[(0,t.Lk)("table",_,[$,(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(K.cart.carts,(e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.id},[(0,t.Lk)("td",null,(0,l.v_)(e.product.title),1),(0,t.Lk)("td",E,(0,l.v_)(e.qty),1)])))),128))])]),(0,t.Lk)("div",j,[(0,t.Lk)("div",U,[W,(0,t.Lk)("p",q,"NT$ "+(0,l.v_)(e.$filters.currency(K.cart.total)),1)]),K.cart.total!=K.cart.final_total?((0,t.uX)(),(0,t.CE)("div",P,[X,(0,t.Lk)("span",D," -NT$ "+(0,l.v_)(e.$filters.currency(K.cart.total-K.cart.final_total)),1)])):(0,t.Q3)("",!0)]),(0,t.Lk)("div",I,[N,(0,t.Lk)("span",O,"NT$ "+(0,l.v_)(e.$filters.currency(K.cart.final_total)),1)])]),T])])])])],64)}s(4114);var Q={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},cart:{},isLoading:!1}},methods:{isPhone(e){const a=/^(09)[0-9]{8}$/;return!!a.test(e)||"請輸入正確的手機號碼"},createOrder(){const e="https://vue3-course-api.hexschool.io/api/kstyle-api/order";this.isLoading=!0,this.$http.post(e,{data:this.form}).then((e=>{this.isLoading=!1,this.$router.push(`/userPay/${e.data.orderId}`)}))},getCart(){const e="https://vue3-course-api.hexschool.io/api/kstyle-api/cart";this.isLoading=!0,this.$http.get(e).then((e=>{this.isLoading=!1,this.cart=e.data.data,console.log("getCart",e)}))}},created(){this.getCart()}},S=s(1241);const A=(0,S.A)(Q,[["render",K],["__scopeId","data-v-21e63d20"]]);var J=A}}]);
//# sourceMappingURL=667.4748d0cb.js.map