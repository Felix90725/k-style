"use strict";(self["webpackChunkk_style"]=self["webpackChunkk_style"]||[]).push([[899],{8390:function(t,a,e){e.d(a,{A:function(){return f}});var s=e(6768),l=e(4232);const o={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},n={class:"modal-dialog",role:"document"},i={class:"modal-content border-0"},d={class:"modal-header bg-danger text-white"},r={class:"modal-title"},c=(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),u={class:"modal-body"},p={class:"text-danger"},m={class:"modal-footer"},h=(0,s.Lk)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function b(t,a,e,b,k,L){return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("div",n,[(0,s.Lk)("div",i,[(0,s.Lk)("div",d,[(0,s.Lk)("h5",r,[(0,s.Lk)("span",null,"刪除 "+(0,l.v_)(e.item.title),1)]),c]),(0,s.Lk)("div",u,[(0,s.eW)(" 是否刪除 "),(0,s.Lk)("strong",p,(0,l.v_)(e.item.title),1),(0,s.eW)(" (刪除後將無法恢復)。 ")]),(0,s.Lk)("div",m,[h,(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger",onClick:a[0]||(a[0]=a=>t.$emit("del-item"))},"確認刪除")])])])],512)}var k=e(3286),L={props:{item:{}},data(){return{modal:{}}},mixins:[k.A]},g=e(1241);const y=(0,g.A)(L,[["render",b]]);var f=y},899:function(t,a,e){e.r(a),e.d(a,{default:function(){return At}});var s=e(6768),l=e(5130),o=e(4232);const n=t=>((0,s.Qi)("data-v-4786922a"),t=t(),(0,s.jt)(),t),i={class:"container my-5"},d=(0,s.Fv)('<ol class="shoppingProcess d-flex justify-content-center align-items-center p-0 mb-5" data-v-4786922a><li data-v-4786922a><span class="active" data-v-4786922a>1</span><h5 class="my-2" data-v-4786922a>購物車</h5><p class="text-warning" data-v-4786922a>請確認您的商品</p></li><i class="bi bi-arrow-right" data-v-4786922a></i><li data-v-4786922a><span data-v-4786922a>2</span><h5 class="my-2" data-v-4786922a>填寫資料</h5><p class="text-warning" data-v-4786922a>填寫訂購人相關資料</p></li><i class="bi bi-arrow-right" data-v-4786922a></i><li data-v-4786922a><span data-v-4786922a>3</span><h5 class="my-2" data-v-4786922a>訂單付款</h5><p class="text-warning" data-v-4786922a>確認資料並付款</p></li><i class="bi bi-arrow-right" data-v-4786922a></i><li data-v-4786922a><span data-v-4786922a>4</span><h5 class="my-2" data-v-4786922a>完成訂單</h5><p class="text-warning" data-v-4786922a>完成訂單</p></li></ol>',1),r={key:0,class:"row"},c={class:"col-12 col-lg-8 mb-2"},u=n((()=>(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fa-solid fa-cart-shopping me-2 mb-3"}),(0,s.eW)("您的購物車")],-1))),p={class:"buyOrDel d-flex justify-content-between my-2"},m=n((()=>(0,s.Lk)("a",{href:"/#/userAllProducts",class:"btn btn-outline-secondary text-decoration-none"},[(0,s.Lk)("i",{class:"fa-solid fa-arrow-left-long me-1"}),(0,s.eW)("繼續選購")],-1))),h=n((()=>(0,s.Lk)("i",{class:"fa-regular fa-trash-can me-1"},null,-1))),b={class:"table"},k=n((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{class:"col-6"},"商品"),(0,s.Lk)("th",{class:"col-3"},"數量"),(0,s.Lk)("th",{class:"col-2"},"價格"),(0,s.Lk)("th",{class:"col-1"})])],-1))),L=["src","alt"],g={class:"ms-md-3 mt-2"},y={class:"pe-4"},f={class:"input-group bg-warning"},v={class:"input-group-prepend"},C=["onClick"],x=n((()=>(0,s.Lk)("i",{class:"fas fa-minus"},null,-1))),w=[x],_=["onChange","onUpdate:modelValue"],$={class:"input-group-append"},M=["onClick"],D=n((()=>(0,s.Lk)("i",{class:"fas fa-plus"},null,-1))),A=[D],P=n((()=>(0,s.Lk)("span",{class:"price d-md-none"},"價格:",-1))),E=["onClick"],Q=n((()=>(0,s.Lk)("i",{class:"fa-solid fa-trash-can",style:{"font-size":"20px"}},null,-1))),X=[Q],j={class:"col-12 col-lg-4"},q={class:"cart-total"},F=n((()=>(0,s.Lk)("h4",{class:"m-0 p-2 text-center bg-secondary text-light rounded-top-2"},"購物車總計",-1))),I={class:"card-body p-3 border"},W={class:"list-unstyled border-bottom m-0 pb-3"},U={class:"d-flex align-items-center justify-content-between mb-4 mt-2"},N=n((()=>(0,s.Lk)("h5",{class:"m-0 fw-normal"},"商品總數",-1))),T={class:"m-0 fw-normal"},z={class:"d-flex align-items-center justify-content-between"},S=n((()=>(0,s.Lk)("h5",{class:"m-0 fw-normal"},"小計",-1))),V={class:"m-0 fw-normal"},J={key:0,class:"d-flex align-items-center justify-content-between text-danger mt-2"},K=n((()=>(0,s.Lk)("h5",{class:"m-0 fw-normal"},"折價劵折扣",-1))),O={class:"m-0 fw-normal"},B={class:"coupons pt-3 pb-3 border-bottom"},G=n((()=>(0,s.Lk)("p",{class:"mb-4"},[(0,s.eW)("限時優惠劵(全品項9折): "),(0,s.Lk)("span",{class:"text-danger"},"style2024")],-1))),H=n((()=>(0,s.Lk)("label",{for:"coupons",class:"mb-2"},"優惠劵",-1))),R={class:"input-group mb-2"},Y={key:0,class:"text-danger"},Z={key:0,class:"total d-flex align-items-center justify-content-between mt-3"},tt=n((()=>(0,s.Lk)("h5",{class:"m-0 fw-normal"},"合計(包含折扣)",-1))),at={class:"m-0 fw-normal"},et={key:1,class:"total d-flex align-items-center justify-content-between mt-3"},st=n((()=>(0,s.Lk)("h5",{class:"m-0 fw-normal"},"合計",-1))),lt={class:"m-0 fw-normal"},ot=n((()=>(0,s.Lk)("div",{class:"goPay text-center"},[(0,s.Lk)("a",{href:"/#/userDetail",class:"btn w-100 bg-dark text-light text-decoration-none rounded-0 rounded-bottom-2"},"前往結帳")],-1))),nt={key:1,class:"text text-center p-5 m-5",style:{"min-height":"400px"}},it=n((()=>(0,s.Lk)("i",{class:"fa-solid fa-cart-plus me-3 mt-5",style:{"font-size":"90px"}},null,-1))),dt=n((()=>(0,s.Lk)("h2",{class:"pt-4 pb-3"},"您的購物車目前是空的唷~",-1))),rt=n((()=>(0,s.Lk)("p",{class:"p-3",style:{"font-size":"20px"}},"趕快加入商品到購物車!!!",-1))),ct=n((()=>(0,s.Lk)("a",{href:"/#/userAllProducts",class:"btn btn-dark mb-1"},"繼續選購",-1))),ut=[it,dt,rt,ct];function pt(t,a,e,n,x,D){const Q=(0,s.g2)("isLoading"),it=(0,s.g2)("DelModal"),dt=(0,s.g2)("UserDelModal");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(Q,{active:x.isLoading},null,8,["active"]),(0,s.Lk)("div",i,[d,this.allQty>0?((0,s.uX)(),(0,s.CE)("div",r,[(0,s.Lk)("div",c,[u,(0,s.Lk)("div",p,[m,(0,s.Lk)("a",{href:"#",class:"btn btn-outline-danger text-decoration-none ms-3",onClick:a[0]||(a[0]=(0,l.D$)((t=>D.openDelProductModal(!0)),["prevent"]))},[h,(0,s.eW)("清空購物車")])]),(0,s.Lk)("table",b,[k,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(x.cart.carts,(a=>((0,s.uX)(),(0,s.CE)("tr",{class:"align-middle",key:a.id},[(0,s.Lk)("td",null,[(0,s.Lk)("img",{src:a.product.imageUrl,alt:a.product.category},null,8,L),(0,s.Lk)("span",g,(0,o.v_)(a.product.title),1)]),(0,s.Lk)("td",y,[(0,s.Lk)("div",f,[(0,s.Lk)("div",v,[(0,s.Lk)("button",{class:"btn btn-sm btn-outline-secondary text-light border-0 py-2 rounded-0",type:"button",id:"button-addon1",style:{width:"35px",height:"35px"},onClick:t=>D.updateQuantity(a,-1)},w,8,C)]),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"countInput form-control form-control-sm text-center m-0 shadow-nonebg-light","aria-label":"Example text with button addon",value:"1",onChange:t=>D.updateCart(a),"onUpdate:modelValue":t=>a.qty=t,style:{}},null,40,_),[[l.Jo,a.qty,void 0,{number:!0}]]),(0,s.Lk)("div",$,[(0,s.Lk)("button",{class:"btn btn-sm btn-outline-secondary text-light border-0 py-2 rounded-0",type:"button",id:"button-addon2",style:{width:"35px",height:"35px"},onClick:t=>D.updateQuantity(a,1)},A,8,M)])])]),(0,s.Lk)("td",null,[(0,s.Lk)("span",null,[P,(0,s.eW)(" NT$ "+(0,o.v_)(t.$filters.currency(a.total)),1)])]),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"border-0 bg-white text-dark",onClick:t=>D.openDelProductModal(!1,a)},X,8,E)])])))),128))])])]),(0,s.Lk)("div",j,[(0,s.Lk)("div",q,[F,(0,s.Lk)("div",I,[(0,s.Lk)("ul",W,[(0,s.Lk)("li",U,[N,(0,s.Lk)("span",T,(0,o.v_)(x.allQty)+" 項",1)]),(0,s.Lk)("li",z,[S,(0,s.Lk)("span",V,"NT$ "+(0,o.v_)(t.$filters.currency(x.cart.total)),1)]),x.cart.total!=x.cart.final_total?((0,s.uX)(),(0,s.CE)("li",J,[K,(0,s.Lk)("span",O," -NT$ "+(0,o.v_)(t.$filters.currency(x.cart.total-x.cart.final_total)),1)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",B,[G,H,(0,s.Lk)("div",R,[(0,s.bo)((0,s.Lk)("input",{id:"coupons",type:"text",class:"form-control rounded-start-1",placeholder:"請輸入優惠碼","aria-label":"coupons","aria-describedby":"button-coupons","onUpdate:modelValue":a[1]||(a[1]=t=>x.coupon_code=t)},null,512),[[l.Jo,x.coupon_code]]),(0,s.Lk)("button",{class:"btn btn-outline-secondary rounded-end-1 text-light border-0",type:"button",id:"button-coupons",onClick:a[2]||(a[2]=t=>D.addCouponCode())}," 送出 ")]),x.cart.total!=x.cart.final_total?((0,s.uX)(),(0,s.CE)("span",Y,(0,o.v_)(x.coupon_data.message),1)):(0,s.Q3)("",!0)]),x.cart.total!=x.cart.final_total?((0,s.uX)(),(0,s.CE)("div",Z,[tt,(0,s.Lk)("span",at,"NT$ "+(0,o.v_)(t.$filters.currency(x.cart.final_total)),1)])):((0,s.uX)(),(0,s.CE)("div",et,[st,(0,s.Lk)("span",lt,"NT$ "+(0,o.v_)(t.$filters.currency(x.cart.final_total)),1)]))]),ot])])])):((0,s.uX)(),(0,s.CE)("div",nt,ut))]),(0,s.bF)(it,{ref:"delModal",item:x.tempCartProduct,onDelItem:D.deleteProduct},null,8,["item","onDelItem"]),(0,s.bF)(dt,{ref:"userDelModal",item:x.tempCart,onDelItem:D.deleteProduct},null,8,["item","onDelItem"])],64)}var mt=e(8390);const ht={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},bt={class:"modal-dialog",role:"document"},kt={class:"modal-content border-0"},Lt=(0,s.Fv)('<div class="modal-header bg-danger text-white"><h5 class="modal-title"><span>清空購物車</span></h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"> 是否清空購物車 <strong class="text-danger"></strong> (刪除後將無法恢復)。 </div>',2),gt={class:"modal-footer"},yt=(0,s.Lk)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function ft(t,a,e,l,o,n){return(0,s.uX)(),(0,s.CE)("div",ht,[(0,s.Lk)("div",bt,[(0,s.Lk)("div",kt,[Lt,(0,s.Lk)("div",gt,[yt,(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger",onClick:a[0]||(a[0]=a=>t.$emit("del-item"))},"確認刪除")])])])],512)}var vt=e(3286),Ct={props:{item:{}},data(){return{modal:{}}},mixins:[vt.A]},xt=e(1241);const wt=(0,xt.A)(Ct,[["render",ft]]);var _t=wt,$t=e(1600),Mt={components:{DelModal:mt.A,UserDelModal:_t},data(){return{cart:{},isLoading:!1,allQty:0,tempCart:{},tempCartProduct:{},isAll:!0,coupon_code:"",coupon_data:{}}},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/kstyle-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1,this.cart=t.data.data,this.addAllQty(),console.log("getCart",t)}))},updateQuantity(t,a){const e=t.qty+a;e>=1&&(t.qty=e,this.updateCart(t))},updateCart(t){const a=`https://vue3-course-api.hexschool.io/api/kstyle-api/cart/${t.id}`,e={product_id:t.id,qty:t.qty};this.isLoading=!0,this.$http.put(a,{data:e}).then((t=>{this.isLoading=!1,$t.A.emit("updateCart"),this.$httpMessageState(t,"更新數量"),console.log("updateCart",t),this.getCart()}))},addAllQty(){this.allQty=this.cart.carts.reduce(((t,a)=>t+a.qty),0)},openDelProductModal(t,a){t?(this.tempCart={},this.$refs.userDelModal.showModal()):(this.tempCart={...a},this.$refs.delModal.showModal(),this.tempCartProduct=this.tempCart.product),console.log(this.tempCartProduct)},deleteProduct(){if(this.tempCart.id){const t=`https://vue3-course-api.hexschool.io/api/kstyle-api/cart/${this.tempCart.id}`;this.isLoading=!0,this.$http.delete(t).then((t=>{this.isLoading=!1,$t.A.emit("updateCart"),this.$httpMessageState(t,"刪除品項"),this.$refs.delModal.hideModal(),this.getCart()}))}else{const t="https://vue3-course-api.hexschool.io/api/kstyle-api/carts";this.isLoading=!0,this.$http.delete(t).then((t=>{this.isLoading=!1,$t.A.emit("updateCart"),this.$httpMessageState(t,"刪除購物車"),this.$refs.userDelModal.hideModal(),this.getCart()}))}},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/kstyle-api/coupon",a={code:this.coupon_code};this.$http.post(t,{data:a}).then((t=>{this.coupon_data=t.data,console.log("addCouponCode",t),this.getCart()}))}},mounted(){this.getCart()}};const Dt=(0,xt.A)(Mt,[["render",pt],["__scopeId","data-v-4786922a"]]);var At=Dt}}]);
//# sourceMappingURL=899.18fd0972.js.map