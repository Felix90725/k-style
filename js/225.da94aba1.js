"use strict";(self["webpackChunkk_style"]=self["webpackChunkk_style"]||[]).push([[225],{9509:function(t,e){e.A={save(t){const e=JSON.stringify(t);localStorage.setItem("myFavorite",e)},get(){return JSON.parse(localStorage.getItem("myFavorite"))}}},7225:function(t,e,s){s.r(e),s.d(e,{default:function(){return Q}});var i=s(6768),a=s(4232);const l=t=>((0,i.Qi)("data-v-5e4ee3b1"),t=t(),(0,i.jt)(),t),c={key:0,class:"container p-lg-5 m-0 m-auto",style:{"min-height":"750px"}},o=l((()=>(0,i.Lk)("h3",{class:"m-0 mb-3 mt-4 mt-lg-0"},[(0,i.Lk)("i",{class:"bi bi-bag-heart me-2"}),(0,i.eW)("您的願望清單")],-1))),r={class:"table",style:{"max-width":"1200px"}},n=l((()=>(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",{class:"col-2 col-lg-2 ps-0"},"商品圖片"),(0,i.Lk)("th",{class:"col-4 col-lg-3"},"商品名稱"),(0,i.Lk)("th",{class:"col-2 col-lg-2 ps-lg-3"},"價格"),(0,i.Lk)("th",{class:"col-3 col-lg-3 text-center"},"加入購物車"),(0,i.Lk)("th",{class:"col-1 col-lg-2 text-center"},"刪除")])],-1))),d={class:"ps-md-0"},p=["src","alt"],u={class:"align-middle py-0 py-md-2 align-items-md-end"},h={class:"mb-2"},g={class:"m-0 mb-1 p-1 px-2 rounded-1 text-dark flex",style:{"font-size":"14px","background-color":"#E9E9E9"}},k={class:"align-middle ps-lg-3 pt-0 pt-md-2"},m={class:"card-text mt-2"},L=l((()=>(0,i.Lk)("span",{class:"price d-md-none"},"價格:",-1))),b={key:0,class:"text-dark"},y={key:1},f={key:0,class:"text-dark text-decoration-line-through"},v={key:1,class:"text-danger d-md-block"},x={class:"addCartBtn align-middle text-center"},C=["onClick"],_=l((()=>(0,i.Lk)("i",{class:"fa-solid fa-cart-shopping me-2"},null,-1))),I={class:"delBtn align-middle text-center"},E=["onClick"],A=l((()=>(0,i.Lk)("i",{class:"fa-solid fa-trash-can",style:{"font-size":"20px"}},null,-1))),$=[A],F={key:1,class:"text text-center p-5 m-5",style:{"min-height":"560px"}},X=l((()=>(0,i.Lk)("i",{class:"bi bi-bag-heart my-5 pb-3",style:{"font-size":"110px"}},null,-1))),T=l((()=>(0,i.Lk)("h2",{class:"pt-4 pb-3"},"您的願望清單目前是空的唷～",-1))),S=l((()=>(0,i.Lk)("p",{class:"p-3",style:{"font-size":"20px"}},"趕快加入商品到願望清單吧～",-1)));function w(t,e,s,l,A,w){const N=(0,i.g2)("isLoading"),O=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(N,{active:A.isLoading},null,8,["active"]),A.products.length>0?((0,i.uX)(),(0,i.CE)("div",c,[o,(0,i.Lk)("table",r,[n,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(A.products,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",d,[(0,i.Lk)("img",{src:e.imageUrl,alt:e.title},null,8,p)]),(0,i.Lk)("td",u,[(0,i.Lk)("h5",h,(0,a.v_)(e.title),1),(0,i.Lk)("span",g,(0,a.v_)(e.category),1)]),(0,i.Lk)("td",k,[(0,i.Lk)("p",m,[L,e.origin_price===e.price?((0,i.uX)(),(0,i.CE)("span",b," NT$"+(0,a.v_)(t.$filters.currency(e.origin_price)),1)):((0,i.uX)(),(0,i.CE)("span",y,[e.price?((0,i.uX)(),(0,i.CE)("span",f," NT$"+(0,a.v_)(t.$filters.currency(e.origin_price)),1)):(0,i.Q3)("",!0),e.price?((0,i.uX)(),(0,i.CE)("span",v," NT$"+(0,a.v_)(t.$filters.currency(e.price)),1)):(0,i.Q3)("",!0)]))])]),(0,i.Lk)("td",x,[(0,i.Lk)("button",{type:"button",class:"btn btn-dark rounded-1",onClick:t=>w.addCard(e.id)},[_,(0,i.eW)("加入購物車 ")],8,C)]),(0,i.Lk)("td",I,[(0,i.Lk)("button",{type:"button",class:"btn border-0",onClick:t=>w.delFavorite(e)},$,8,E)])])))),128))])])])):((0,i.uX)(),(0,i.CE)("div",F,[X,T,S,(0,i.bF)(O,{to:"/userAllProducts",class:"btn btn-dark mb-1"},{default:(0,i.k6)((()=>[(0,i.eW)("去逛逛")])),_:1})]))],64)}var N=s(9509),O=s(1600),z={data(){return{products:{},favoriteItems:N.A.get("myFavorite")||[],loadingItem:"",isLoading:!1}},methods:{getAllProducts(){const t="https://vue3-course-api.hexschool.io/api/kstyle-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{const e=t.data.products.filter((t=>this.favoriteItems.includes(t.id)));this.products=e.sort(((t,e)=>this.favoriteItems.indexOf(e.id)-this.favoriteItems.indexOf(t.id))),this.isLoading=!1})).catch((t=>{this.$httpMessageState(t,"連線錯誤，請再試一次"),this.isLoading=!1}))},delFavorite(t){this.favoriteItems.includes(t.id)&&(this.favoriteItems.splice(this.favoriteItems.indexOf(t.id),1),O.A.emit("push-message",{style:"warning",title:"已從收藏清單中移除"})),N.A.save(this.favoriteItems),this.getAllProducts(),O.A.emit("updateFavorite")},addCard(t){const e="https://vue3-course-api.hexschool.io/api/kstyle-api/cart",s={product_id:t,qty:1};this.isLoading=!0,this.$http.post(e,{data:s}).then((t=>{O.A.emit("updateCart"),this.isLoading=!1,this.$httpMessageState(t,"加入購物車")})).catch((t=>{this.$httpMessageState(t,"連線錯誤，請再試一次"),this.isLoading=!1}))},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}},created(){this.getAllProducts(),this.scrollToTop()}},P=s(1241);const M=(0,P.A)(z,[["render",w],["__scopeId","data-v-5e4ee3b1"]]);var Q=M}}]);
//# sourceMappingURL=225.da94aba1.js.map