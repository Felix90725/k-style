{"version":3,"file":"js/225.da94aba1.js","mappings":"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","sources":["webpack://k-style/./src/methods/handleFavorites.js","webpack://k-style/./src/views/frontend/UserLike.vue","webpack://k-style/./src/views/frontend/UserLike.vue?4516"],"sourcesContent":["export default {\n  // 將資料存入localStorage\n  save(itemId) {\n    const favoriteId = JSON.stringify(itemId); // 把要存的itemId轉成JSON字串\n    localStorage.setItem('myFavorite', favoriteId);\n  },\n  // 從localStorage取出myFavorite資料\n  get() {\n    return JSON.parse(localStorage.getItem('myFavorite')); // 將JSON字串轉換成JavaScript的數值或是物件\n  },\n};\n","<template>\n  <isLoading :active=\"isLoading\" />\n  <div class=\"container p-lg-5 m-0 m-auto\" style=\"min-height: 750px\" v-if=\"products.length > 0\">\n    <h3 class=\"m-0 mb-3 mt-4 mt-lg-0\"><i class=\"bi bi-bag-heart me-2\"></i>您的願望清單</h3>\n    <table class=\"table\" style=\"max-width: 1200px\">\n      <thead>\n        <tr>\n          <th class=\"col-2 col-lg-2 ps-0\">商品圖片</th>\n          <th class=\"col-4 col-lg-3\">商品名稱</th>\n          <th class=\"col-2 col-lg-2 ps-lg-3\">價格</th>\n          <th class=\"col-3 col-lg-3 text-center\">加入購物車</th>\n          <th class=\"col-1 col-lg-2 text-center\">刪除</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in products\" :key=\"item.id\">\n          <td class=\"ps-md-0\"><img :src=\"item.imageUrl\" :alt=\"item.title\" /></td>\n          <td class=\"align-middle py-0 py-md-2 align-items-md-end\">\n            <h5 class=\"mb-2\">{{ item.title }}</h5>\n            <span class=\"m-0 mb-1 p-1 px-2 rounded-1 text-dark flex\"\n              style=\"font-size: 14px; background-color: #E9E9E9;\">{{ item.category }}</span>\n          </td>\n          <td class=\"align-middle ps-lg-3 pt-0 pt-md-2\">\n            <p class=\"card-text mt-2\">\n              <span class=\"price d-md-none\">價格:</span>\n              <span class=\"text-dark\" v-if=\"item.origin_price === item.price\">\n                NT${{ $filters.currency(item.origin_price) }}\n              </span>\n              <span v-else>\n                <span class=\"text-dark text-decoration-line-through\" v-if=\"item.price\">\n                  NT${{ $filters.currency(item.origin_price) }}\n                </span>\n                <span class=\"text-danger d-md-block\" v-if=\"item.price\">\n                  NT${{ $filters.currency(item.price) }}\n                </span>\n              </span>\n            </p>\n          </td>\n          <td class=\"addCartBtn align-middle text-center\">\n            <button type=\"button\" class=\"btn btn-dark rounded-1\" @click=\"addCard(item.id)\">\n              <i class=\"fa-solid fa-cart-shopping me-2\"></i>加入購物車\n            </button>\n          </td>\n          <td class=\"delBtn align-middle text-center\">\n            <button type=\"button\" class=\"btn border-0\"\n            @click=\"delFavorite(item)\">\n              <i class=\"fa-solid fa-trash-can\" style=\"font-size: 20px\"></i>\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class=\"text text-center p-5 m-5\" style=\"min-height: 560px\" v-else>\n    <i class=\"bi bi-bag-heart my-5 pb-3\" style=\"font-size: 110px\"></i>\n    <h2 class=\"pt-4 pb-3\">您的願望清單目前是空的唷～</h2>\n    <p class=\"p-3\" style=\"font-size: 20px\">趕快加入商品到願望清單吧～</p>\n    <router-link to=\"/userAllProducts\" class=\"btn btn-dark mb-1\">去逛逛</router-link>\n  </div>\n</template>\n\n<script>\nimport handleFavorites from '@/methods/handleFavorites';\nimport emitter from '@/methods/emitter';\n\nexport default {\n  data() {\n    return {\n      products: {},\n      favoriteItems: handleFavorites.get('myFavorite') || [], // 取得收藏商品\n      loadingItem: '',\n      isLoading: false,\n    };\n  },\n  methods: {\n    // 取得商品列表並篩選收藏品項\n    getAllProducts() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.isLoading = true;\n      this.$http\n        .get(api)\n        .then((res) => {\n          // 過濾收藏的產品\n          const filterFavorite = res.data.products\n            .filter((product) => this.favoriteItems.includes(product.id));\n          // 根據 filterFavorite 的順序排序收藏產品\n          this.products = filterFavorite.sort(\n            (a, b) => this.favoriteItems.indexOf(b.id) - this.favoriteItems.indexOf(a.id),\n          );\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.$httpMessageState(err, '連線錯誤，請再試一次');\n          this.isLoading = false;\n        });\n    },\n\n    // 移除愛心\n    delFavorite(product) {\n      if (this.favoriteItems.includes(product.id)) {\n        this.favoriteItems.splice(this.favoriteItems.indexOf(product.id), 1); // 移除收藏\n        emitter.emit('push-message', {\n          // toast\n          style: 'warning',\n          title: '已從收藏清單中移除',\n        });\n      }\n      handleFavorites.save(this.favoriteItems);\n      this.getAllProducts();\n      emitter.emit('updateFavorite'); // 與 navFavorite 同步更新\n    },\n\n    // 加入購物車\n    addCard(id) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const cart = {\n        product_id: id,\n        qty: 1,\n      };\n      this.isLoading = true;\n      this.$http\n        .post(api, { data: cart })\n        .then((res) => {\n          emitter.emit('updateCart'); // 與 UserNavbar 同步更新\n          this.isLoading = false;\n          this.$httpMessageState(res, '加入購物車');\n        })\n        .catch((err) => {\n          this.$httpMessageState(err, '連線錯誤，請再試一次');\n          this.isLoading = false;\n        });\n    },\n\n    // 滾動到最上方\n    scrollToTop() {\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth',\n      });\n    },\n  },\n  created() {\n    this.getAllProducts();\n    this.scrollToTop();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\nimg {\n  width: 180px;\n  height: 220px;\n  object-fit: cover;\n}\n\n@media screen and (max-width: 991px) {\n  .addCartBtn, .delBtn {\n    padding: 0;\n    button {\n      width: 100%;\n      font-size: 14px;\n    }\n  }\n}\n@media screen and (max-width: 767px) {\n  h5 {\n    font-size: 20px;\n  }\n  p {\n    font-size: 16px;\n  }\n  img {\n    width: 100%;\n    height: 400px;\n  }\n  .delBtn{\n    background-color: #E9E9E9;\n    border-radius: 3px;\n    margin: 5px 0;\n  }\n  .table {\n    span {\n      font-size: 16px;\n      & + span {\n        margin-left: 5px;\n      }\n    }\n    border-collapse: collapse;\n    td,\n    thead {\n      border: none;\n    }\n    thead {\n      display: none;\n    }\n    tbody {\n      tr {\n        display: flex;\n        flex-direction: column;\n        border-bottom: 1px solid #888888;\n        margin-bottom: 10px;\n        td {\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n        }\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./UserLike.vue?vue&type=template&id=5e4ee3b1&scoped=true\"\nimport script from \"./UserLike.vue?vue&type=script&lang=js\"\nexport * from \"./UserLike.vue?vue&type=script&lang=js\"\n\nimport \"./UserLike.vue?vue&type=style&index=0&id=5e4ee3b1&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5e4ee3b1\"]])\n\nexport default __exports__"],"names":["save","itemId","favoriteId","JSON","stringify","localStorage","setItem","get","parse","getItem","key","class","style","_createElementVNode","_createTextVNode","_hoisted_22","_createElementBlock","_Fragment","_createVNode","_component_isLoading","active","$data","isLoading","products","length","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_renderList","item","id","_hoisted_5","src","imageUrl","alt","title","_hoisted_6","_hoisted_7","_hoisted_8","_toDisplayString","_hoisted_9","category","_hoisted_10","_hoisted_11","_hoisted_12","origin_price","price","_hoisted_13","_ctx","$filters","currency","_hoisted_14","_hoisted_15","_createCommentVNode","_hoisted_16","_hoisted_17","type","onClick","$event","$options","addCard","_hoisted_19","_hoisted_18","_hoisted_20","delFavorite","_hoisted_23","_hoisted_21","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_component_router_link","to","default","_withCtx","_","data","favoriteItems","handleFavorites","loadingItem","methods","getAllProducts","api","this","$http","then","res","filterFavorite","filter","product","includes","sort","a","b","indexOf","catch","err","$httpMessageState","splice","emitter","emit","cart","product_id","qty","post","scrollToTop","window","scrollTo","top","behavior","created","__exports__","render"],"sourceRoot":""}