"use strict";(self["webpackChunkk_style"]=self["webpackChunkk_style"]||[]).push([[260],{9509:function(a,t){t.A={save(a){const t=JSON.stringify(a);localStorage.setItem("myFavorite",t)},get(){return JSON.parse(localStorage.getItem("myFavorite"))}}},9216:function(a,t,e){e.d(t,{A:function(){return F}});var s=e(6768),r=e(4232);const n=a=>((0,s.Qi)("data-v-3e2a527f"),a=a(),(0,s.jt)(),a),o={class:"navbar navbar-expand-lg navbar-light sticky-top"},l={class:"container"},i={id:"routerToggler",class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",ref:"navbarBtn"},c=n((()=>(0,s.Lk)("span",{class:"navbar-toggler-icon"},null,-1))),d=[c],u={class:"collapse navbar-collapse",id:"navbarNavAltMarkup"},v={class:"navbar-nav ms-auto"},k=n((()=>(0,s.Lk)("i",{class:"fa-solid fa-heart",style:{"font-size":"18px"}},null,-1))),p={key:0,class:"linkNumbers position-absolute translate-middle badge rounded-circle bg-danger mt-2"},b=n((()=>(0,s.Lk)("span",{class:"visually-hidden"},"unread messages",-1))),g=n((()=>(0,s.Lk)("i",{class:"fa-solid fa-cart-shopping",style:{"font-size":"18px"}},null,-1))),h={key:0,class:"linkNumbers position-absolute translate-middle badge rounded-circle bg-danger mt-2"},m=n((()=>(0,s.Lk)("span",{class:"visually-hidden"},"unread messages",-1)));function f(a,t,e,n,c,f){const L=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("nav",o,[(0,s.Lk)("div",l,[(0,s.bF)(L,{to:"/",class:"logoLink navbar-brand"},{default:(0,s.k6)((()=>[(0,s.eW)("K-style")])),_:1}),(0,s.Lk)("button",i,d,512),(0,s.Lk)("div",u,[(0,s.Lk)("ul",v,[(0,s.bF)(L,{to:"/",class:"homeLink nav-link me-3",onClick:f.closeNavbar},{default:(0,s.k6)((()=>[(0,s.eW)("首頁")])),_:1},8,["onClick"]),(0,s.bF)(L,{to:"/userAllProducts",class:"nav-link me-3",onClick:f.closeNavbar},{default:(0,s.k6)((()=>[(0,s.eW)("所有商品")])),_:1},8,["onClick"]),(0,s.bF)(L,{to:"/userCheck",class:"nav-link me-3",onClick:f.closeNavbar},{default:(0,s.k6)((()=>[(0,s.eW)("訂單查詢")])),_:1},8,["onClick"]),(0,s.bF)(L,{to:"/userLike",class:"nav-link me-3 position-relative",onClick:f.closeNavbar},{default:(0,s.k6)((()=>[k,c.favoriteItems.length>0?((0,s.uX)(),(0,s.CE)("span",p,[(0,s.eW)((0,r.v_)(c.favoriteItems.length)+" ",1),b])):(0,s.Q3)("",!0)])),_:1},8,["onClick"]),(0,s.bF)(L,{to:"/userCart",class:"nav-link me-3 position-relative",onClick:f.closeNavbar},{default:(0,s.k6)((()=>[g,c.carts.length>0?((0,s.uX)(),(0,s.CE)("span",h,[(0,s.eW)((0,r.v_)(f.cartsNum)+" ",1),m])):(0,s.Q3)("",!0)])),_:1},8,["onClick"])])])])])}var L=e(1600),y=e(9509),C={data(){return{carts:[],favoriteItems:y.A.get("myFavorite")||[]}},methods:{getCart(){const a="https://vue3-course-api.hexschool.io/api/kstyle-api/cart";this.$http.get(a).then((a=>{this.carts=a.data.data.carts})).catch((a=>{this.$httpMessageState(a,"連線錯誤，請再試一次")}))},getFavorite(){this.favoriteItems=y.A.get()},closeNavbar(){document.body.offsetWidth<992&&this.$refs.navbarBtn.click()}},computed:{cartsNum(){let a=0;return this.carts.forEach((t=>{a+=t.qty})),a}},mounted(){L.A.on("updateCart",this.getCart),L.A.on("updateFavorite",this.getFavorite),this.getCart()}},N=e(1241);const w=(0,N.A)(C,[["render",f],["__scopeId","data-v-3e2a527f"]]);var F=w},7260:function(a,t,e){e.r(t),e.d(t,{default:function(){return y}});var s=e(6768),r=e(5130);const n=a=>((0,s.Qi)("data-v-09f8f633"),a=a(),(0,s.jt)(),a),o={class:"kv"},l={class:"container h-100"},i={class:"login col-md-5 p-5 border border-5 border-white rounded text-white"},c=n((()=>(0,s.Lk)("h2",{class:"h3 mb-3 font-weight-normal text-center border-bottom pb-3"},"管理員登入",-1))),d={key:0,class:"alert alert-danger d-block",role:"alert"},u={class:"mb-3"},v={for:"inputEmail",class:"d-block"},k={class:"mb-3"},p={for:"inputPassword",class:"d-block"},b=n((()=>(0,s.Lk)("div",{class:"text-end mt-4"},[(0,s.Lk)("button",{class:"btn text-white mt-2",type:"submit"},"登入")],-1)));function g(a,t,e,n,g,h){const m=(0,s.g2)("isLoading"),f=(0,s.g2)("UserNavbar");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(m,{active:g.isLoading},null,8,["active"]),(0,s.bF)(f),(0,s.Lk)("div",o,[(0,s.Lk)("div",l,[(0,s.Lk)("form",{class:"row justify-content-center align-content-center h-100",onSubmit:t[2]||(t[2]=(0,r.D$)(((...a)=>h.signIn&&h.signIn(...a)),["prevent"]))},[(0,s.Lk)("div",i,[c,g.loginError?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",d,"登入失敗")),(0,s.Lk)("div",u,[(0,s.Lk)("label",v,[(0,s.eW)("Email "),(0,s.bo)((0,s.Lk)("input",{type:"email",id:"inputEmail",class:"form-control mt-2",placeholder:"請輸入電子郵件",required:"","onUpdate:modelValue":t[0]||(t[0]=a=>g.user.username=a)},null,512),[[r.Jo,g.user.username]])])]),(0,s.Lk)("div",k,[(0,s.Lk)("label",p,[(0,s.eW)("Password "),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"inputPassword",class:"form-control mt-2",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":t[1]||(t[1]=a=>g.user.password=a)},null,512),[[r.Jo,g.user.password]])])]),b])],32)])])],64)}e(4114);var h=e(9216),m={components:{UserNavbar:h.A},data(){return{user:{username:"",password:""},loginError:!0,isLoading:!1}},methods:{signIn(){const a="https://vue3-course-api.hexschool.io/admin/signin";this.isLoading=!0,this.$http.post(a,this.user).then((a=>{if(a.data.success){const{token:t,expired:e}=a.data;document.cookie=`hexToken=${t}; expires=${new Date(e)}`,this.$router.push("/backstage/control")}this.user.password="",this.loginError=!1,this.isLoading=!1})).catch((a=>{this.$httpMessageState(a,"連線錯誤，請再試一次"),this.isLoading=!1}))}}},f=e(1241);const L=(0,f.A)(m,[["render",g],["__scopeId","data-v-09f8f633"]]);var y=L}}]);
//# sourceMappingURL=260.a72f4f7b.js.map