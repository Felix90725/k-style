"use strict";(self["webpackChunkk_style"]=self["webpackChunkk_style"]||[]).push([[294],{1294:function(e,t,l){l.r(t),l.d(t,{default:function(){return se}});var r=l(6768),s=l(4232);const a=e=>((0,r.Qi)("data-v-551cf35b"),e=e(),(0,r.jt)(),e),d={class:"container my-5"},n=a((()=>(0,r.Lk)("h2",{class:"pb-4"},[(0,r.Lk)("i",{class:"bi bi-card-checklist me-2"}),(0,r.eW)("您的購買清單")],-1))),o={class:"table"},i=a((()=>(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"orderId"},"訂單編號"),(0,r.Lk)("th",null,"訂購日期"),(0,r.Lk)("th",null,"總金額"),(0,r.Lk)("th",{class:"text-center"},"付款狀態"),(0,r.Lk)("th",{class:"text-center"},"詳細")])],-1))),u={class:"orderId"},c={class:"text-center"},k={key:0,class:"text-success"},L={key:1,class:"text-danger"},h={class:"text-center"},p=["onClick"];function b(e,t,l,a,b,m){const v=(0,r.g2)("isLoading"),y=(0,r.g2)("UserOrderModal");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(v,{active:b.isLoading},null,8,["active"]),(0,r.Lk)("div",d,[n,(0,r.Lk)("table",o,[i,(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(b.filteredOrders,(t=>((0,r.uX)(),(0,r.CE)("tr",{class:"align-middle",key:t.id},[(0,r.Lk)("td",u,(0,s.v_)(t.id),1),(0,r.Lk)("td",null,(0,s.v_)(e.$filters.date(t.create_at)),1),(0,r.Lk)("td",null,(0,s.v_)(e.$filters.currency(t.total)),1),(0,r.Lk)("td",c,[t.is_paid?((0,r.uX)(),(0,r.CE)("span",k,"已付款")):((0,r.uX)(),(0,r.CE)("span",L,"未付款"))]),(0,r.Lk)("td",h,[(0,r.Lk)("button",{class:"btn btn-secondary",type:"button",onClick:e=>m.openOrder(t)}," 查看詳情 ",8,p)])])))),128))])])]),(0,r.bF)(y,{ref:"userOrderModal",order:b.tempOrder},null,8,["order"])],64)}const m=e=>((0,r.Qi)("data-v-78f379d7"),e=e(),(0,r.jt)(),e),v={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},y={class:"modal-dialog modal-lg",role:"document"},f={class:"modal-content border-0"},_=m((()=>(0,r.Lk)("div",{class:"modal-header bg-warning text-white"},[(0,r.Lk)("h5",{class:"modal-title ms-2",id:"exampleModalLabel"},"訂單細節"),(0,r.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),g={class:"modal-body"},x={class:"row"},C={class:"col-12 mb-4"},O=m((()=>(0,r.Lk)("h3",null,"用戶資料",-1))),E={class:"table"},$={key:0},X=m((()=>(0,r.Lk)("th",{style:{width:"100px"}},"姓名",-1))),w=m((()=>(0,r.Lk)("th",null,"Email",-1))),M=["href"],I=m((()=>(0,r.Lk)("th",null,"電話",-1))),T=["href"],F=m((()=>(0,r.Lk)("th",null,"地址",-1))),j={class:"col-12 mb-4"},A=m((()=>(0,r.Lk)("h3",null,"訂單細節",-1))),K={class:"table"},Q=m((()=>(0,r.Lk)("th",{style:{width:"100px"}},"訂單編號",-1))),U=m((()=>(0,r.Lk)("th",null,"下單時間",-1))),q=m((()=>(0,r.Lk)("th",null,"付款時間",-1))),N={key:0},S={key:1},W=m((()=>(0,r.Lk)("th",null,"付款狀態",-1))),z={key:0,class:"text-success"},B={key:1,class:"text-danger"},D=m((()=>(0,r.Lk)("th",null,"總金額",-1))),G={class:"col-12"},H=m((()=>(0,r.Lk)("h3",null,"選購商品",-1))),J={class:"table"},P={class:"text-end"};function R(e,t,l,a,d,n){return(0,r.uX)(),(0,r.CE)("div",v,[(0,r.Lk)("div",y,[(0,r.Lk)("div",f,[_,(0,r.Lk)("div",g,[(0,r.Lk)("div",x,[(0,r.Lk)("div",C,[O,(0,r.Lk)("table",E,[l.order.user?((0,r.uX)(),(0,r.CE)("tbody",$,[(0,r.Lk)("tr",null,[X,(0,r.Lk)("td",null,(0,s.v_)(l.order.user.name),1)]),(0,r.Lk)("tr",null,[w,(0,r.Lk)("td",null,[(0,r.Lk)("a",{class:"text-decoration-none",href:`mailto:${l.order.user.email}`,style:{color:"#000000"}},(0,s.v_)(l.order.user.email),9,M)])]),(0,r.Lk)("tr",null,[I,(0,r.Lk)("td",null,[(0,r.Lk)("a",{class:"text-decoration-none",href:`tel:${l.order.user.tel}`,style:{color:"#000000"}},(0,s.v_)(l.order.user.tel),9,T)])]),(0,r.Lk)("tr",null,[F,(0,r.Lk)("td",null,(0,s.v_)(l.order.user.address),1)])])):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",j,[A,(0,r.Lk)("table",K,[(0,r.Lk)("tbody",null,[(0,r.Lk)("tr",null,[Q,(0,r.Lk)("td",null,(0,s.v_)(l.order.id),1)]),(0,r.Lk)("tr",null,[U,(0,r.Lk)("td",null,(0,s.v_)(e.$filters.date(l.order.create_at)),1)]),(0,r.Lk)("tr",null,[q,(0,r.Lk)("td",null,[l.order.is_paid?((0,r.uX)(),(0,r.CE)("span",N,(0,s.v_)(e.$filters.date(l.order.paid_date)),1)):((0,r.uX)(),(0,r.CE)("span",S,"時間不正確"))])]),(0,r.Lk)("tr",null,[W,(0,r.Lk)("td",null,[l.order.is_paid?((0,r.uX)(),(0,r.CE)("strong",z,"已付款")):((0,r.uX)(),(0,r.CE)("span",B,"尚未付款"))])]),(0,r.Lk)("tr",null,[D,(0,r.Lk)("td",null,(0,s.v_)(e.$filters.currency(l.order.total)),1)])])])]),(0,r.Lk)("div",G,[H,(0,r.Lk)("table",J,[(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.order.products,(t=>((0,r.uX)(),(0,r.CE)("tr",{key:t.id},[(0,r.Lk)("th",null,(0,s.v_)(t.product.title),1),(0,r.Lk)("td",null,(0,s.v_)(t.qty)+" / "+(0,s.v_)(t.product.unit),1),(0,r.Lk)("td",P,"NT$ "+(0,s.v_)(e.$filters.currency(t.total)),1)])))),128))])])])])])])])],512)}var V=l(3286),Y={props:{order:{type:Object,default(){return{}}}},data(){return{modal:{}}},mixins:[V.A]},Z=l(1241);const ee=(0,Z.A)(Y,[["render",R],["__scopeId","data-v-78f379d7"]]);var te=ee,le={components:{UserOrderModal:te},data(){return{isLoading:!1,email:"",orders:[],tempOrder:{},filteredOrders:[],paginatedOrders:[],pagination:{},page:1}},methods:{getOrder(e=1){const t=`https://vue3-course-api.hexschool.io/api/kstyle-api/orders?page=${e}`;this.isLoading=!0,this.$http.get(t).then((e=>{this.orders=e.data.orders,this.filteredOrders=this.orders.filter((e=>e.user.email===this.email)),this.isLoading=!1})).catch((e=>{this.$httpMessageState(e,"連線錯誤，請再試一次"),this.isLoading=!1}))},openOrder(e){this.tempOrder={...e},this.$refs.userOrderModal.showModal()},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}},created(){this.scrollToTop(),this.getOrder(),this.email=this.$route.params.email_id}};const re=(0,Z.A)(le,[["render",b],["__scopeId","data-v-551cf35b"]]);var se=re}}]);
//# sourceMappingURL=294.3805498f.js.map