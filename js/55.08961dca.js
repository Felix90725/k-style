"use strict";(self["webpackChunkk_style"]=self["webpackChunkk_style"]||[]).push([[55],{4652:function(t,a,e){e.d(a,{A:function(){return y}});var s=e(6768),l=e(4232);const o={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},n={class:"modal-dialog",role:"document"},d={class:"modal-content border-0"},i={class:"modal-header bg-danger text-white"},c={class:"modal-title"},r=(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),u={class:"modal-body"},p={class:"text-danger"},h={class:"modal-footer"},m=(0,s.Lk)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function b(t,a,e,b,k,f){return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("div",n,[(0,s.Lk)("div",d,[(0,s.Lk)("div",i,[(0,s.Lk)("h5",c,[(0,s.Lk)("span",null,"刪除 "+(0,l.v_)(e.item.title),1)]),r]),(0,s.Lk)("div",u,[(0,s.eW)(" 是否刪除 "),(0,s.Lk)("strong",p,(0,l.v_)(e.item.title),1),(0,s.eW)(" (刪除後將無法恢復)。 ")]),(0,s.Lk)("div",h,[m,(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger",onClick:a[0]||(a[0]=a=>t.$emit("del-item"))},"確認刪除")])])])],512)}var k=e(3286),f={props:{item:{}},data(){return{modal:{}}},mixins:[k.A]},g=e(1241);const L=(0,g.A)(f,[["render",b]]);var y=L},3055:function(t,a,e){e.r(a),e.d(a,{default:function(){return Pt}});var s=e(6768),l=e(5130),o=e(4232);const n=t=>((0,s.Qi)("data-v-80f8d230"),t=t(),(0,s.jt)(),t),d={class:"container my-5 pb-4"},i=(0,s.Fv)('<ol class="shoppingProcess d-flex justify-content-center align-items-center p-0 mb-4 mt-2" data-v-80f8d230><li data-v-80f8d230><span class="active" data-v-80f8d230>1</span><h5 class="my-2" data-v-80f8d230>購物車</h5><p class="text-warning" data-v-80f8d230>請確認您的商品</p></li><i class="bi bi-arrow-right" data-v-80f8d230></i><li data-v-80f8d230><span data-v-80f8d230>2</span><h5 class="my-2" data-v-80f8d230>填寫資料</h5><p class="text-warning" data-v-80f8d230>填寫訂購人相關資料</p></li><i class="bi bi-arrow-right" data-v-80f8d230></i><li data-v-80f8d230><span data-v-80f8d230>3</span><h5 class="my-2" data-v-80f8d230>訂單付款</h5><p class="text-warning" data-v-80f8d230>確認資料並付款</p></li><i class="bi bi-arrow-right" data-v-80f8d230></i><li data-v-80f8d230><span data-v-80f8d230>4</span><h5 class="my-2" data-v-80f8d230>完成訂單</h5><p class="text-warning" data-v-80f8d230>完成訂單</p></li></ol>',1),c={key:0,class:"row"},r={class:"col-12 col-lg-8 mb-2"},u=n((()=>(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fa-solid fa-cart-shopping me-2 mb-3"}),(0,s.eW)("您的購物車")],-1))),p={class:"buyOrDel d-flex justify-content-between my-2"},h=n((()=>(0,s.Lk)("i",{class:"fa-solid fa-arrow-left-long me-1"},null,-1))),m=n((()=>(0,s.Lk)("i",{class:"fa-regular fa-trash-can me-1"},null,-1))),b={class:"table"},k=n((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{class:"col-2 ps-0"},"商品圖片"),(0,s.Lk)("th",{class:"col-4"},"商品"),(0,s.Lk)("th",{class:"col-4"},"數量"),(0,s.Lk)("th",{class:"col-1"})])],-1))),f={class:"ps-0"},g=["src","alt"],L={class:""},y={class:"d-block",style:{"font-size":"16px"}},v=n((()=>(0,s.Lk)("span",{class:"price d-md-none",style:{"font-size":"16px"}},"價格:",-1))),x={class:"pe-md-4 px-0"},C={class:"input-group bg-warning rounded-1"},w={class:"input-group-prepend"},$=["disabled","onClick"],_=n((()=>(0,s.Lk)("i",{class:"fas fa-minus"},null,-1))),M=[_],A=["onInput","onChange","onUpdate:modelValue"],D={class:"input-group-append"},Q=["onClick"],P=n((()=>(0,s.Lk)("i",{class:"fas fa-plus"},null,-1))),E=[P],X={class:"delBtn"},q=["onClick"],F=n((()=>(0,s.Lk)("i",{class:"fa-solid fa-trash-can",style:{"font-size":"20px"}},null,-1))),T=[F],I={class:"col-12 col-lg-4"},W={class:"cart-total"},j=n((()=>(0,s.Lk)("h4",{class:"m-0 p-2 text-center bg-secondary text-light rounded-top-2"},"購物車總計",-1))),S={class:"card-body p-3 border"},U={class:"list-unstyled border-bottom m-0 pb-3"},z={class:"d-flex align-items-center justify-content-between mb-4 mt-2"},N=n((()=>(0,s.Lk)("h5",{class:"m-0"},"商品總數",-1))),V={class:"m-0 fw-normal"},J={class:"d-flex align-items-center justify-content-between"},K=n((()=>(0,s.Lk)("h5",{class:"m-0"},"小計",-1))),B={class:"m-0 fw-normal"},O={key:0,class:"d-flex align-items-center justify-content-between text-danger mt-2"},G=n((()=>(0,s.Lk)("h5",{class:"m-0"},"折價劵折扣",-1))),H={class:"m-0 fw-normal"},R={class:"coupons pt-3 pb-3 border-bottom"},Y=n((()=>(0,s.Lk)("h5",{class:"mb-4"},[(0,s.eW)(" 限時優惠劵(全品項9折)： "),(0,s.Lk)("span",{class:"text-danger fw-normal"},"style2024")],-1))),Z={for:"coupons",class:"input-group"},tt=n((()=>(0,s.Lk)("h5",{class:"mb-2"},"優惠劵",-1))),at={class:"input-group mb-2"},et={key:0,class:"text-danger"},st={key:0,class:"total d-flex align-items-center justify-content-between mt-3"},lt=n((()=>(0,s.Lk)("h5",{class:"m-0"},"合計(包含折扣)",-1))),ot={class:"m-0 fw-normal"},nt={key:1,class:"total d-flex align-items-center justify-content-between mt-3"},dt=n((()=>(0,s.Lk)("h5",{class:"m-0"},"合計",-1))),it={class:"m-0 fw-normal"},ct={class:"goPay text-center"},rt={key:1,class:"text text-center p-md-5 m-md-5",style:{"min-height":"400px"}},ut=n((()=>(0,s.Lk)("i",{class:"fa-solid fa-cart-plus me-3 mt-5",style:{"font-size":"90px"}},null,-1))),pt=n((()=>(0,s.Lk)("h2",{class:"pt-4 pb-3"},"您的購物車目前是空的唷～",-1))),ht=n((()=>(0,s.Lk)("p",{class:"p-2",style:{"font-size":"20px"}},"趕快加入商品到購物車！！！",-1)));function mt(t,a,e,n,_,P){const F=(0,s.g2)("isLoading"),mt=(0,s.g2)("router-link"),bt=(0,s.g2)("DelModal"),kt=(0,s.g2)("UserDelModal");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(F,{active:_.isLoading},null,8,["active"]),(0,s.Lk)("div",d,[i,this.allQty>0?((0,s.uX)(),(0,s.CE)("div",c,[(0,s.Lk)("div",r,[u,(0,s.Lk)("div",p,[(0,s.bF)(mt,{to:"/userAllProducts",class:"btn btn-outline-secondary text-decoration-none"},{default:(0,s.k6)((()=>[h,(0,s.eW)("繼續選購")])),_:1}),(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger text-decoration-none ms-3",onClick:a[0]||(a[0]=(0,l.D$)((t=>P.openDelProductModal(!0)),["prevent"]))},[m,(0,s.eW)("清空購物車 ")])]),(0,s.Lk)("table",b,[k,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(_.cart.carts,(a=>((0,s.uX)(),(0,s.CE)("tr",{class:"align-middle",key:a.id},[(0,s.Lk)("td",f,[(0,s.Lk)("img",{src:a.product.imageUrl,alt:a.product.category},null,8,g)]),(0,s.Lk)("td",null,[(0,s.Lk)("span",L,(0,o.v_)(a.product.title),1),(0,s.Lk)("span",y,[v,(0,s.eW)(" NT$ "+(0,o.v_)(t.$filters.currency(a.total)),1)])]),(0,s.Lk)("td",x,[(0,s.Lk)("div",C,[(0,s.Lk)("div",w,[(0,s.Lk)("button",{class:"btn btn-sm btn-outline-secondary text-light border-0 py-2 rounded-1 rounded-end-0",type:"button",id:"button-addon1",style:{width:"35px",height:"35px"},disabled:1===a.qty,onClick:t=>P.updateQuantity(a,-1)},M,8,$)]),(0,s.bo)((0,s.Lk)("input",{type:"number",class:"countInput form-control form-control-sm text-center m-0 shadow-nonebg-light","aria-label":"Example text with button addon",value:"1",onInput:t=>P.checkQuantity(a),onChange:t=>P.updateCart(a),"onUpdate:modelValue":t=>a.qty=t},null,40,A),[[l.Jo,a.qty,void 0,{number:!0}]]),(0,s.Lk)("div",D,[(0,s.Lk)("button",{class:"btn btn-sm btn-outline-secondary text-light border-0 py-2 rounded-1 rounded-start-0",type:"button",id:"button-addon2",style:{width:"35px",height:"35px"},onClick:t=>P.updateQuantity(a,1)},E,8,Q)])])]),(0,s.Lk)("td",X,[(0,s.Lk)("button",{type:"button",class:"btn border-0 p-0 w-100",onClick:t=>P.openDelProductModal(!1,a)},T,8,q)])])))),128))])])]),(0,s.Lk)("div",I,[(0,s.Lk)("div",W,[j,(0,s.Lk)("div",S,[(0,s.Lk)("ul",U,[(0,s.Lk)("li",z,[N,(0,s.Lk)("span",V,(0,o.v_)(_.allQty)+" 項",1)]),(0,s.Lk)("li",J,[K,(0,s.Lk)("span",B,"NT$ "+(0,o.v_)(t.$filters.currency(_.cart.total)),1)]),_.cart.total!=_.cart.final_total?((0,s.uX)(),(0,s.CE)("li",O,[G,(0,s.Lk)("span",H," -NT$ "+(0,o.v_)(t.$filters.currency(_.cart.total-_.cart.final_total)),1)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",R,[Y,(0,s.Lk)("label",Z,[tt,(0,s.Lk)("div",at,[(0,s.bo)((0,s.Lk)("input",{id:"coupons",type:"text",class:"form-control rounded-start-1",placeholder:"請輸入優惠碼","aria-label":"coupons","aria-describedby":"button-coupons","onUpdate:modelValue":a[1]||(a[1]=t=>_.coupon_code=t)},null,512),[[l.Jo,_.coupon_code]]),(0,s.Lk)("button",{class:"btn btn-outline-secondary rounded-end-1 text-light border-0",type:"button",id:"button-coupons",onClick:a[2]||(a[2]=(...t)=>P.addCouponCode&&P.addCouponCode(...t))}," 送出 ")])]),_.cart.total!=_.cart.final_total?((0,s.uX)(),(0,s.CE)("span",et,(0,o.v_)(_.coupon_data.message),1)):(0,s.Q3)("",!0)]),_.cart.total!=_.cart.final_total?((0,s.uX)(),(0,s.CE)("div",st,[lt,(0,s.Lk)("span",ot,"NT$ "+(0,o.v_)(t.$filters.currency(_.cart.final_total)),1)])):((0,s.uX)(),(0,s.CE)("div",nt,[dt,(0,s.Lk)("span",it,"NT$ "+(0,o.v_)(t.$filters.currency(_.cart.final_total)),1)]))]),(0,s.Lk)("div",ct,[(0,s.bF)(mt,{to:"/userDetail",class:"btn w-100 bg-dark text-light text-decoration-none rounded-0 rounded-bottom-2"},{default:(0,s.k6)((()=>[(0,s.eW)(" 前往結帳")])),_:1})])])])])):((0,s.uX)(),(0,s.CE)("div",rt,[ut,pt,ht,(0,s.bF)(mt,{to:"/userAllProducts",class:"btn btn-dark mb-1"},{default:(0,s.k6)((()=>[(0,s.eW)("繼續選購")])),_:1})]))]),(0,s.bF)(bt,{ref:"delModal",item:_.tempCartProduct,onDelItem:P.deleteProduct},null,8,["item","onDelItem"]),(0,s.bF)(kt,{ref:"userDelModal",item:_.tempCart,onDelItem:P.deleteProduct},null,8,["item","onDelItem"])],64)}var bt=e(4652);const kt={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},ft={class:"modal-dialog",role:"document"},gt={class:"modal-content border-0"},Lt=(0,s.Fv)('<div class="modal-header bg-danger text-white"><h5 class="modal-title"><span>清空購物車</span></h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"> 是否清空購物車 <strong class="text-danger"></strong> (刪除後將無法恢復)。 </div>',2),yt={class:"modal-footer"},vt=(0,s.Lk)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function xt(t,a,e,l,o,n){return(0,s.uX)(),(0,s.CE)("div",kt,[(0,s.Lk)("div",ft,[(0,s.Lk)("div",gt,[Lt,(0,s.Lk)("div",yt,[vt,(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger",onClick:a[0]||(a[0]=a=>t.$emit("del-item"))},"確認刪除")])])])],512)}var Ct=e(3286),wt={props:{item:{}},data(){return{modal:{}}},mixins:[Ct.A]},$t=e(1241);const _t=(0,$t.A)(wt,[["render",xt]]);var Mt=_t,At=e(1600),Dt={components:{DelModal:bt.A,UserDelModal:Mt},data(){return{cart:{},isLoading:!1,allQty:0,tempCart:{},tempCartProduct:{},isAll:!0,coupon_code:"",coupon_data:{}}},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/kstyle-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,this.addAllQty(),this.isLoading=!1})).catch((t=>{this.$httpMessageState(t,"連線錯誤，請再試一次"),this.isLoading=!1}))},updateQuantity(t,a){const e=t.qty+a;e>=1&&(t.qty=e,this.updateCart(t))},checkQuantity(t){t.qty<1&&(t.qty=1)},updateCart(t){const a=`https://vue3-course-api.hexschool.io/api/kstyle-api/cart/${t.id}`,e={product_id:t.id,qty:t.qty};this.isLoading=!0,this.$http.put(a,{data:e}).then((t=>{this.$httpMessageState(t,"更新數量"),this.isLoading=!1,At.A.emit("updateCart"),this.getCart()})).catch((t=>{this.$httpMessageState(t,"連線錯誤，請再試一次"),this.isLoading=!1}))},addAllQty(){this.allQty=this.cart.carts.reduce(((t,a)=>t+a.qty),0)},openDelProductModal(t,a){t?(this.tempCart={},this.$refs.userDelModal.showModal()):(this.tempCart={...a},this.$refs.delModal.showModal(),this.tempCartProduct=this.tempCart.product)},deleteProduct(){if(this.tempCart.id){const t=`https://vue3-course-api.hexschool.io/api/kstyle-api/cart/${this.tempCart.id}`;this.isLoading=!0,this.$http.delete(t).then((t=>{this.isLoading=!1,At.A.emit("updateCart"),this.$refs.delModal.hideModal(),this.getCart(),this.$httpMessageState(t,"刪除品項")})).catch((t=>{this.$httpMessageState(t,"連線錯誤，請再試一次"),this.isLoading=!1}))}else{const t="https://vue3-course-api.hexschool.io/api/kstyle-api/carts";this.isLoading=!0,this.$http.delete(t).then((t=>{this.isLoading=!1,At.A.emit("updateCart"),this.$refs.userDelModal.hideModal(),this.getCart(),this.$httpMessageState(t,"刪除購物車")})).catch((t=>{this.$httpMessageState(t,"連線錯誤，請再試一次"),this.isLoading=!1}))}},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/kstyle-api/coupon",a={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:a}).then((t=>{this.isLoading=!1,console.log(t),!0===t.data.success?(this.coupon_data=t.data,At.A.emit("push-message",{style:"success",title:"優惠劵套用成功!"})):(At.A.emit("push-message",{style:"danger",title:"找不到優惠劵!"}),this.coupon_code=""),this.getCart()})).catch((t=>{this.$httpMessageState(t,"連線錯誤，請再試一次")}))},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}},mounted(){this.getCart(),this.scrollToTop(),At.A.emit("updateCart")}};const Qt=(0,$t.A)(Dt,[["render",mt],["__scopeId","data-v-80f8d230"]]);var Pt=Qt}}]);
//# sourceMappingURL=55.08961dca.js.map